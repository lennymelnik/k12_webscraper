define(["underscore","jquery","base.model"],function(e,t,n){"use strict";var r=function(){this.type="Link",this.config={position:"right"}};return n.extend({defaultStyles:{pd:"gh-datatable toggle-arrow-small table-hover table striping",ng:"gh-datatable table"},parse:function(t){return t=e.cloneDeep(t),t.headers=this.headersParse(e.pick(t,"columns")),t.columnCount=e.deepGet(t,"headers.components.length",0),t.data=t.data||[],GLOBALS.ENVIRONMENT.experience==="nextgen"?t.baseStyle=this.defaultStyles.ng:t.baseStyle=this.defaultStyles.pd,e.isArray(t.data)?(t.hasRows=!0,e.each(t.data,function(e,t){this.rowParse(e),e.rowId=t},this)):t.hasRows=!1,t},headersParse:function(t){var n=[];return e.each(t.columns,function(t){var i=new r,s=t.header||{};i.displayName=s.displayName,s.sortable&&e.isArray(s.options)&&s.options.length===2&&e.every(s.options,e.isObject)&&(e.extend(i,{url:s.options[0].url,analyticsEvents:s.options[0].analyticsEvents,ariaLabel:s.options[0].displayName,icon:"sort"}),s.options[1].selected?i.icon="sort-desc":s.options[0].selected&&(i.icon="sort-asc",e.extend(i,{url:s.options[1].url,analyticsEvents:s.options[1].analyticsEvents,ariaLabel:s.options[1].displayName}))),i.config.parentConfig=this.generateHeaderParentConfig(s.breakpoints),n.push(i)},this),{type:"Components",groupContainerTag:"tr",itemContainerTag:"th",components:n}},generateHeaderParentConfig:function(t){var n="",r={attributes:{"data-editable":"false"}};return e.each(t,function(e,t){n+=(t>0?",":"")+GH_CONSTANTS.FOOTABLE_BREAKPOINTS[e]}),n.length&&(r.attributes["data-hide"]=n),r},rowParse:function(t){return t.components=e.map(t.components,function(e){return e&&e.type==="MenuOptions"&&(e={type:"Components",groupContainerTag:!1,components:[e]}),e}),t}})});