/*!
 * Draggabilly PACKAGED v1.2.4
 * Make that shiz draggable
 * http://draggabilly.desandro.com
 * MIT license
 */

/*!
 * Packery PACKAGED v1.4.3
 * bin-packing layout library
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * http://packery.metafizzy.co
 * Copyright 2015 Metafizzy
 */

define("app/utils/helpers",["underscore","i18next","handlebars","templateContextManager"],function(e,t,n,r){"use strict";var i={mappedAvatars:{"ng-avatar-generic":"img/nextgen/avatar_generic.svg","ng-avatar-impersonate":"img/nextgen/avatar_impersonate.svg"},mappedIcons:{"default":"fa fa-square-o","ex-out":"fa fa-ban",calendar:"fa fa-calendar",check:"fa fa-check color-success",coffee:"fa fa-coffee color-brown","delete":"fa fa-close color-red",download:"fa fa-download","ellipses-v":"fa fa-ellipsis-v",filter:"fa fa-filter",guided:"fa fa-question-circle",mail:"fa fa-envelope","overview-needs-attention":"fa fa-warning","overview-on-target":"fa fa-check","plus-circle":"fa fa-plus-circle",sort:"fa fa-sort","sort-asc":"fa fa-sort-asc","sort-desc":"fa fa-sort-desc",thumb:"fa fa-thumbs-up",warning:"fa fa-warning color-red",dashboard:"gh-icon icon-dashboard",engagement:"gh-icon icon-engagement-tools","log-out":"gh-icon icon-log-out","my-classes":"gh-icon icon-classes","overview-not-started":"gh-icon icon-not-started","overview-performance":"gh-icon icon-performance","peak-office":"gh-icon icon-office",profile:"gh-icon icon-profile","scheduled-event":"icon-scheduled-event","student-performance":"gh-icon icon-performance",external:"icon-new-window",notification:"icon-notify","fe-popup":"icon-new-window","ng-news":"icon icon-announcements","ng-announcements":"icon icon-announcements","ng-arrow-down":"icon icon-arrow-down","ng-k12":"icon icon-k12","ng-k12-book":"icon icon-k12-book","ng-arrow-left":"icon icon-arrow-left","ng-next-two-days":"icon icon-next-two-days","ng-arrow-right":"icon icon-arrow-right","ng-arrow-up":"icon icon-arrow-up","ng-overdue":"icon icon-overdue","ng-popup":"icon icon-popup icon-new-window","ng-bullet":"icon icon-bullet","ng-camera":"icon icon-camera","ng-schedule":"icon icon-schedule","ng-check":"icon icon-check","ng-classes":"icon icon-classes","ng-compose":"icon icon-compose","ng-dotted-vr":"icon icon-dotted-vr","ng-half":"icon icon-half","ng-logout":"icon icon-logout","ng-timer":"icon icon-timer","ng-mail":"icon icon-mail","ng-bell":"icon icon-bell","ng-dropbox":"icon icon-dropbox","ng-discussions":"icon icon-discussions","ng-gear":"icon icon-gear","ng-chat":"icon icon-chat","ng-close":"icon icon-close","ng-play":"icon icon-play","ng-check2":"icon icon-check2","ng-home":"icon icon-home","ng-controls":"icon icon-controls","ng-more":"icon icon-more","ng-dragger":"icon icon-dragger","ng-bookmark":"icon icon-bookmark","ng-dropdown":"icon icon-dropdown","ng-print":"icon icon-print","ng-schedule2":"icon icon-schedule2","ng-syllabus":"icon icon-syllabus","ng-search":"icon icon-search","ng-plus":"icon icon-plus","ng-edit":"icon icon-edit","ng-today":"icon icon-today","ng-info":"icon icon-info","ng-calendar-grid":" icon icon-calendar-grid","ng-sad":" icon icon-sad","ng-happy":" icon icon-happy","ng-flag":" icon icon-flag","ng-fueleducation":"icon icon-fueleducation","ng-fueled":"icon icon-fueled","ng-shift":"icon icon-shift","ng-refresh":"icon icon-refresh","ng-reports":"icon icon-reports","ng-target":"icon icon-target","ng-list":"icon icon-list","ng-close-fill":"icon icon-close-fill","ng-adaptive":"icon icon-adaptive","ng-no-progress":"icon icon-no-progress","ng-dropup":"icon icon-dropup","ng-checkbox":"icon icon-checkbox","ng-minus":"icon icon-minus","ng-plus-box":"icon icon-plus-box","ng-question":"icon icon-question","ng-export":"icon icon-export","ng-trash":"icon icon-trash","ng-download":"icon icon-download","ng-pan":"icon icon-pan","ng-legend":"icon icon-legend","ng-open-folder":"icon icon-open-folder","ng-paint":"icon icon-paint","ng-link":"icon icon-link","ng-clipboard":"icon icon-clipboard","ng-avatar":"icon icon-avatar","ng-file-share":"icon icon-file-share","ng-avatar-fill":"icon icon-avatar-fill","ng-lock":"icon icon-lock","ng-vr":"icon icon-vr",LB:"lms-icon lms-chiclet-learn-bop",PL:"lms-icon lms-chiclet-presence-learning",BB:"lms-icon lms-chiclet-blackboard",ML:"lms-icon lms-chiclet-middlebury",PW:"lms-icon lms-chiclet-prepworks",NV:"lms-icon lms-chiclet-noodleverse",DL:"lms-icon lms-chiclet-d2l",OL:"lms-icon lms-chiclet-k12",LM:"lms-icon lms-chiclet-k12",EC:"lms-icon lms-chiclet-k12",EM:"lms-icon lms-chiclet-embark12",D2:"lms-icon lms-chiclet-d2",LT:"lms-icon lms-chiclet-lt-stride",IR:"lms-icon lms-chiclet-iready",FU:"fa fa-square-o"},mappedBreakPoints:{"extra-small-devices":"visible-xs ","small-devices":"visible-sm ","medium-devices":"visible-md ","large-devices":"visible-lg "},dataBreakPoints:{"extra-small-devices":"xs","small-devices":"sm","medium-devices":"md","large-devices":"lg","all-devices":"all"},t:function(e){if(!e)return"";var r=t.t(e);return new n.SafeString(r)},format:function(t,n){return e.template(t)(e.extend(r.toJSON(),n||{}))},tr:function(e,r){var i=t.functions.extend(r.hash,e);r.fn&&(i.defaultValue=r.fn(e));var s=t.t(i.key,i);return new n.SafeString(s)},debug:function(e){debug.debug("Current Context"),debug.debug("===================="),debug.debug(this),e&&(debug.debug("Value"),debug.debug("===================="),debug.debug(e))},compare:function(e,t,n){if(arguments.length<3)throw new Error('Handlebars Helper "compare" needs 2 parameters');var r=n.hash.operator||"===",i={"===":function(e,t){return e===t},"!=":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"typeof":function(e,t){return typeof e===t}};if(!i[r])throw new Error('Handlebars Helper "compare" doesnt know the operator: '+r);var s=i[r](e,t);return s?n.fn(this):n.inverse(this)},ifEq:function(e,t,n){return e===t?n.fn(this):n.inverse(this)},ifNotEq:function(e,t,n){return e!==t?n.fn(this):n.inverse(this)},isNotNull:function(t,n){return e.isNull(t)?n.inverse(this):n.fn(this)},isNull:function(t,n){return e.isNull(t)?n.fn(this):n.inverse(this)},nvl:function(t,n,r,i){return i?e.nvl(t,n,r):e.nvl(t,n)},ifHasValue:function(t,n){return e.isNull(t)||e.isUndefined(t)?n.inverse(this):n.fn(this)},attributes:function(t){return new n.SafeString(e.map(t||{},function(e,t){return t=n.Utils.escapeExpression(t),e===null?t:t+'="'+n.Utils.escapeExpression(e)+'"'}).join(" "))},boolAttr:function(e){return this[e]?e:""},matchBreakpointClass:function(t){var r="";return e.each(t,function(e){r+=i.mappedBreakPoints[e]}),new n.SafeString(r)},matchBreakPointData:function(t){var r="";return e.each(t,function(e){r+=i.dataBreakPoints[e]+","}),r=r.substring(0,r.length-1),new n.SafeString(r)},getIcon:function(e){return e?new n.SafeString(i.mappedIcons[e]||"fa fa-"+e):""},getAvatar:function(e){return e?new n.SafeString(i.mappedAvatars[e]||e):""},analyticsHelper:function(t){var r=[];return e.each(t,function(t){r.push("data-track-"+t.type+'="'+i.stripQuotes(t.id)+'"'),e.each(t.data,function(e){var t=e.value||e.valueRef;r.push("data-track-attr-"+i.stripQuotes(e.key)+'="'+i.stripQuotes(t)+'"')})}),new n.SafeString(r.join(" "))},nextgenClassImage:function(e){var t="";switch(e){case"Language Arts":t="english";break;case"Mathematics":t="algebra";break;case"Science":t="earth";break;case"Social Studies":t="history";break;case"Technology":t="earth";break;case"Test Prep":t="history";break;case"World Language":t="spanish";break;case"Elective":t="homeroom";break;case"Fine Arts":t="art";break;case"Health":t="homeroom";break;default:t="homeroom"}return new n.SafeString(t)},displayCourseIcon:function(e,t,r){var i=n.Utils.escapeExpression(e),s=n.Utils.escapeExpression(t),o=n.Utils.escapeExpression(r),u="",a=function(e,t,n){return t==="white"?n==="small"?'<div class="img-rounded sprite-courses-back sprite-'+e+'Small"></div>':'<div class="img-rounded sprite-courses-front sprite-'+e+'White"></div>':'<div class="img-rounded sprite-courses-front sprite-'+e+'Color"></div>'};switch(i){case"Language Arts":u=a("LanguageArts",s,o);break;case"Mathematics":u=a("Math",s,o);break;case"Science":u=a("Science",s,o);break;case"Social Studies":u=a("SocialStudies",s,o);break;case"Technology":u=a("Technology",s,o);break;case"Test Prep":u=a("WorldLanguage",s,o);break;case"World Language":u=a("WorldLanguage",s,o);break;case"Elective":u=a("Elective",s,o);break;case"Fine Arts":u=a("Art",s,o);break;case"Health":u=a("Science",s,o);break;default:u=a("WorldLanguage",s,o)}return new n.SafeString(u)},stripQuotes:function(e){return e?e.replace(/(["])/g,"\\$-"):""},displayCourseColor:function(e,t){var r=n.Utils.escapeExpression(t),i="";switch(r){case"Language Arts":i=e+"books";break;case"Mathematics":i=e+"math";break;case"Science":i=e+"chemistry";break;case"Social Studies":i=e+"social";break;case"Technology":i=e+"tech";break;case"Test Prep":i=e+"book";break;case"World Language":i=e+"language";break;case"Elective":i=e+"elective";break;case"Fine Arts":i=e+"art";break;case"Unspecified":i=e+"books";break;case"Health":i=e+"biology"}return new n.SafeString(i)},courseTypeHTMLClass:function(e){return new n.SafeString(e.replace(/_/g,"-").toLowerCase()+"-course-type")},ifFullCourseCard:function(e,t){return e===GH_CONSTANTS.CARDS.TYPE.ACTIVE||e===GH_CONSTANTS.CARDS.TYPE.READY_TO_GRADE?t.fn(this):t.inverse(this)}};return i}),define("app/layout/layout.view",["jquery","underscore","app/utils/utils","postal","container.view","page.view","session","handlebars","templateregistry"],function(e,t,n,r,i,s,o,u,a){"use strict";var f=i.extend({dashmodules:{},initialize:function(e){this.setAppName(),i.prototype.initialize.apply(this,arguments),this.subscription=e.channel.subscribe("DashboardToggleModule",t.bind(this.toggleViewModule,this)),this.setExperienceStyle(),this.setThemeStyle(),this.registerPartials()},afterRender:function(){i.prototype.afterRender.apply(this,arguments),window.canLoadExternalScripts=!0},render:function(){i.prototype.compositeRender.apply(this,arguments)},addModule:function(e,t,n){if(t){if(!e)throw new Error("There is no name for the dashboard module");n&&(this.regions[".active-dash-module"]=t),this.dashmodules[e]=t}},toggleViewModule:function(e){var t=e.viewName;if(!this.dashmodules[t])throw r.channel("application").publish("navigate","logout"),new Error("The view "+t+" does not exist");this.$dashElement=this.$el.find(".active-dash-module"),this.dashmodules[t].setElement(this.$dashElement),this.transition(e),r.channel("tracking").publish("fireGoogleAnalyticsPageView",{page:"/"+t,title:t}),window.setTimeout(function(){r.channel("application").publish("selectNavItem",{view:t})},500)},transition:function(e){var n=this.dashmodules[e.viewName],r=this.regions[".active-dash-module"];r instanceof s&&r.setInactive(),n instanceof s&&n.setActive(),this.regions[".active-dash-module"]=n,t.isUndefined(e.attributes)||n.setAttributes(e.attributes),this.handleTransition(e)},disposeViews:function(){i.prototype.disposeViews.apply(this,arguments);for(var e in this.dashmodules)this.dashmodules.hasOwnProperty(e)&&delete this.dashmodules[e];for(var t in this.viewInfo)this.viewInfo.hasOwnProperty(t)&&delete this.viewInfo[t];this.subscription.unsubscribe()},setExperienceStyle:function(){var t=e("body"),n=null;o&&o.get("experience")?n=o.get("experience"):GLOBALS.ENVIRONMENT&&GLOBALS.ENVIRONMENT.experience&&(n=GLOBALS.ENVIRONMENT.experience);if(n)for(var r in o.experiences)n===r?(t.addClass(o.experiences[r]),this.changeFavicon(o.favicons[r])):t.removeClass(o.experiences[r]);else t.addClass(o.experiences[o.nextgenKey])},setAppName:function(){GLOBALS.ENVIRONMENT&&GLOBALS.ENVIRONMENT.appTitle&&GLOBALS.ENVIRONMENT.appTitle.displayName&&(document.title=GLOBALS.ENVIRONMENT.appTitle.displayName)},setThemeStyle:function(){var n=e("body"),r=null;if(o&&o.get("theme")){r=o.get("theme");for(var i in o.themes)r===i?n.addClass(o.themes[i]):n.removeClass(o.themes[i]);return}t.forEach(o.themes,function(e){n.removeClass(e)})},changeFavicon:function(t){e("#favicon").remove();var n=document.createElement("link");n.id="favicon",n.rel="shortcut icon",n.href=t,document.head.appendChild(n)},updateHrefBeforeOpeningExternalUrl:function(t){this.toggleDomForResponsiveMenu("hide");var i=e(t.currentTarget);i.attr("target")==="_self"?(t.preventDefault(),r.channel("application").publish("sso",i.data("url"))):i.attr("href",n.getAuthTokenizedUrl(i.data("url"),n.getAuthTokenObject()))},registerPartials:function(){u.registerPartial({nextgenSpinner:a["nextgen_spinner.hbs"]})}});return f}),define("app/layout/preAuthLayout",["jquery","app/layout/layout.view","underscore","postal"],function(e,t,n,r){"use strict";var i=t.extend({events:{"click .navigate":"navigateClick","click .js-external-link":"updateHrefBeforeOpeningExternalUrl"},initialize:function(){t.prototype.initialize.apply(this,arguments),e("body").removeClass("gh-fixed-navbar").addClass("login-body")},afterRender:function(){t.prototype.afterRender.apply(this,arguments)},navigateClick:function(t){console.time("navigateClick");var i=e(t.currentTarget),s=!0;if(n.isEmpty(i.data("url"))||n.isEmpty(i.data("navigate"))||!i.data("urlnav"))t.preventDefault(),s=!1;var o=i.data("navigate");debug.log("navigating to "+o),r.channel("application").publish("navigate",o),console.timeEnd("navigateClick")},handleTransition:function(e){this.dashmodules[e.viewName].active||this.dashmodules[e.viewName].render()}});return i}),define("app/deprecated/widgets/button/button.widget",["jquery","underscore","base.model","container.view","app/utils/utils","app/component/growl.component","postal","app/widgets/link/link.widget","app/widgets/modal/modal.widget"],function(e,t,n,r,i,s,o,u){"use strict";var a=n.extend({defaults:{hideLabel:!0,bindTracking:!0},parse:function(e){return e.linkData={},t.isObject(e.link)?(e.linkData=t.cloneDeep(e.link),e.linkData.url=null,e.linkData.view=null):e.type!=="CancelButton"&&(e.linkData.disabled="disabled"),e.linkData.forceLink=!0,e.linkData.notificationEvents=null,e.linkData.displayName=e.displayName||"",e.linkData.ariaLabel=e.ariaLabel||null,e.linkData.role="button",e.linkData.linkStyle="btn "+(e.style||""),e.linkData.textStyle=e.hideLabel?"hidden-xs":null,e.linkData.iconStyle=e.icon||null,e.linkData.overrideTrackingBinding=t.isBoolean(e.bindTracking)?!e.bindTracking:!1,e}}),f=r.extend({template:"&nbsp;",triggerEventForSubmit:null,model:null,initialize:function(){r.prototype.initialize.apply(this,arguments),this.model=new a,this.linkWidget=new u,this.listenTo(this.linkWidget,"linkClicked",t.bind(this.clickHandler,this)),this.listenTo(this.model,"change",this.render)},clickHandler:function(e){var r=e.event,s=this.model.get("link"),o;if(t.isNull(s)&&this.model.get("type")==="CancelButton"){this.trigger("cancelButtonPressed"),r.preventDefault();return}o=t.find(s.notificationEvents,{eventType:"click"});if(o){var u=new n(o);if(this.triggerEventForSubmit){r.preventDefault(),this.trigger("buttonPressed",s);return}u.get("type")==="com.k12.metadata.items.ModalNotificationEvent"||u.get("type")==="DeprecatedModalNotificationEvent"?this.showModal(u):this.showAlert(u)}t.isObject(s)&&t.isObject(e.link)&&s.id===e.link.id&&s.type!=="endpoint"&&!this.model.get("callbackWrapper")?i.handleDownload(r,s.url,i.getAuthTokenObject(),{}):(this.trigger("buttonPressed",s.url),r.preventDefault())},showAlert:function(e){e.get("type")==="info"?s.showInfoMessage({id:e.get("id"),title:e.get("displayName"),message:e.get("message")}):s.showMessage({id:e.get("id"),title:e.get("displayName"),message:e.get("message"),icon:e.get("icon")})},showModal:function(e){var t=require("app/widgets/modal/modal.widget");this.modal=new t({model:e}),this.modal.showModal({title:e.get("displayName"),msg:e.get("message"),icon:null,footer:!0})},afterRender:function(){this.linkWidget.setElement(this.$el),this.linkWidget.model.clear().set(this.model.get("linkData"))}});return f}),define("app/widgets/modal/modal.widget",["jquery","underscore","container.view","base.view","backbone","app/widgets/componentGroup/component.group.widget","app/deprecated/widgets/button/button.widget"],function(e,t,n,r,i){"use strict";var s=n.extend({template:null,el:".modal-message-container",events:{"click .close":"hideModal"},initialize:function(){GLOBALS.ENVIRONMENT.experience==="nextgen"?this.template="modal.nextgen.hbs":this.template="modal.hbs",n.prototype.initialize.apply(this,arguments),this.subscribeChannel("modal","show",t.bindKey(this,"showModal")),this.subscribeChannel("modal","hide",t.bindKey(this,"hideModal")),t.isEmpty(this.model)&&(this.model=new i.Model)},render:function(){n.prototype.render.apply(this,arguments)},afterRender:function(){navigator.userAgent.match(/iPhone|iPad|iPod/i)&&this._iosPositioningFix()},_iosPositioningFix:function(){e("#dashboard-message").on("show.bs.modal",function(){e(this).css({position:"absolute",marginTop:e(window).scrollTop(),bottom:"auto"}),t.defer(function(){e(".modal-backdrop").css({position:"absolute",top:0,left:0,width:"100%",height:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)})})})},showModal:function(n){this.model=new i.Model;var s={};t.isArray(n.buttons)&&this.model.set("buttons",n.buttons),this.render(),n.requiresInteraction&&(s={backdrop:"static",keyboard:!1}),n.title&&this.addTitle(n.title),n.showClose&&(this.$el.find(".close").removeClass("hidden"),this.$el.find(".modal-header").addClass("modal-header-bottom")),n.msg instanceof r?(this.$el.find(".modal-body").removeClass("text-center"),this.$el.find(".modal-header").removeClass("text-center"),this.addTitle(n.title),this.addView(".modal-message",n.msg),this.setView(".modal-message"),n.msg.model.trigger("change"),this.listenTo(n.msg,"close-modal",function(){this.hideModal()}),this.$el.find(".modal-message").addClass("base-font-reset"),n.titleWidget&&n.titleWidget instanceof r&&(this.addView("#modal-title-header",n.titleWidget),this.setView("#modal-title-header"),n.titleWidget.model.trigger("change"))):n.msg&&this.$el.find(".modal-message").removeClass("base-font-reset").html(n.msg);switch(n.icon){case"success":this.$el.find(".modal-icon-wrapper").removeClass("hide"),this.$el.find(".modal-icon").addClass("fa-check");break;case"error":this.$el.find(".modal-icon-wrapper").removeClass("hide"),this.$el.find(".modal-icon").addClass("fa-times-circle");break;case"info":this.$el.find(".modal-icon-wrapper").removeClass("hide"),this.$el.find(".modal-icon").addClass("fa-gear")}n.footer&&this.$el.find(".modal-footer").removeClass("hide"),e("#dashboard-message").modal(s),n.timeToShowInMilliseconds&&setTimeout(function(){e("#dashboard-message").modal("hide")},n.timeToShowInMilliseconds),n.closeCallback&&e("#dashboard-message").on("hide.bs.modal",function(e){var t=n.scope||this;n.closeCallback.call(t,e)});if(this.model&&this.model.get("buttons")){var o=this.model.get("buttons"),u=require("app/deprecated/widgets/button/button.widget");t.each(o,function(t,n){var r=this,i=new u;t.hideLabel=!1,this.addView("#modal-button-"+n,i),this.setView("#modal-button-"+n),i.model.set(t),e("#modal-button-"+n).click(function(){t.callbackWrapper&&t.callbackWrapper.callback.apply(t.callbackWrapper.scope,[t.link]),r.hideModal()})},this)}e("#dashboard-message").on("hidden.bs.modal",function(){var t=e("#dashboard-message");t.find(".modal-header").addClass("hide"),t.find("#modal-title").html(""),t.find(".modal-message").html(""),t.find(".modal-footer").addClass("hide"),t.find(".modal-icon-wrapper").addClass("hide"),t.find(".modal-icon").removeClass("fa-check").removeClass("fa-gear").removeClass("fa-times-circle"),e("#dashboard-message").unbind("hidden.bs.modal"),e("#dashboard-message").unbind("hide.bs.modal")})},hideModal:function(){e("body").removeClass("modal-open"),e("#dashboard-message").modal("hide"),e(".modal-backdrop").remove(),this.model.clear()},addTitle:function(e){this.$el.find(".modal-header").removeClass("hide"),this.$el.find("#modal-title").html(e)},resetModal:function(){e(".modal-backdrop").remove(),this.addTitle(""),this.$el.find(".close").addClass("hidden"),this.$el.find(".modal-header").removeClass("modal-header-bottom")},_componentParser:function(e){return e&&(e.groupContainerTag="div",e.itemContainerTag="div",!e.updateUrl&&!t.isObject(e.components)&&(e.components=e)),e}});return s}),define("app/core/base.controller",["postal"],function(e){"use strict";return{subscribeChannel:function(t,n,r){this.subscriptions.push(e.channel(t).subscribe(n,r))}}}),define("app/controller/controller",["jquery","underscore","postal","app/utils/notificationEventHelper","widget.registry.service","app/core/base.controller"],function(e,t,n,r,i,s){"use strict";var o=t.extend({layout:null,subscribeChannel:function(e,t,r){this.subscriptions.push(n.channel(e).subscribe(t,r))},_loadPages:function(e){var n=this;t.each(e,function(e){e.view&&e.pageType&&n._loadModule(e.view,e.pageType,e.endpoint)})},_loadModule:function(e,t,r){var s=i.getChannel(t),o=i.getTemplate(t),u={viewId:e,channel:s?s:n.channel(e),defaultServiceUrl:r?r:null};o&&(u.template=o);var a=i.getInstance(t,"static.page",u);this.layout.addModule(e,a,!1)},_handleNotifications:function(e){if(!e)return;t.isArray(e)||(e=[e]);var n=t.filter(e,function(e){return r.isGrowl(e)});t.each(n,r.handleNotificationEvent)}},s);return o}),define("app/controller/preAuthAppController",["jquery","underscore","postal","app/layout/preAuthLayout","app/widgets/modal/modal.widget","app/controller/controller"],function(e,t,n,r,i,s){"use strict";var o=t.extend({viewManager:null,layout:null,subscriptions:[],load:function(s,o){if(!this.layout||e.isEmptyObject(this.layout.dashmodules)){this._resetPreAuthAppController(),s.dispose(),this.subscribeChannel("application","notification",t.bindKey(this,"_handleNotifications")),this.layout=new r({el:".wrapper",template:"preAuthLayout.hbs",channel:n.channel("application"),args:o}),s.addView(".wrapper",this.layout),GLOBALS.ENVIRONMENT.pageSettings&&this._loadPages(GLOBALS.ENVIRONMENT.pageSettings);var u=new i({el:".modal-message-container"});s.addView(".modal-message-container",u),s.compositeRender()}},_resetPreAuthAppController:function(){t.each(this.subscriptions,function(e){e.unsubscribe()}),this.subscriptions=[]}},s);return o}),define("app/services/dashboard.service",["jquery","underscore","base.service","session"],function(e,t,n,r){"use strict";var i={getDashboard:function(){return n.doGET(r.endpoint("dashboard"),{})},getEbAccess:function(){return n.doGET(r.endpoint("ebAccess"),{})},getActiveCards:function(e){return e.activeCardGroup&&e.activeCardGroup.updateUrl?n.doGET(e.activeCardGroup.updateUrl):[]},getInactiveCards:function(e){return e.inactiveCardGroup&&e.inactiveCardGroup.updateUrl?n.doGET(e.inactiveCardGroup.updateUrl):[]},searchEB:function(e){return n.doGET(r.endpoint("ebSearch"),{urlSubs:[e]})}};return i}),!function(e){function t(){}function n(e){function n(t){t.prototype.option||(t.prototype.option=function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))})}function s(t,n){e.fn[t]=function(s){if("string"==typeof s){for(var u=r.call(arguments,1),a=0,f=this.length;f>a;a++){var l=this[a],c=e.data(l,t);if(c)if(e.isFunction(c[s])&&"_"!==s.charAt(0)){var h=c[s].apply(c,u);if(void 0!==h)return h}else o("no such method '"+s+"' for "+t+" instance");else o("cannot call methods on "+t+" prior to initialization; attempted to call '"+s+"'")}return this}return this.each(function(){var r=e.data(this,t);r?(r.option(s),r._init()):(r=new n(this,s),e.data(this,t,r))})}}if(e){var o="undefined"==typeof console?t:function(e){console.error(e)};return e.bridget=function(e,t){n(t),s(e,t)},e.bridget}}var r=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],n):n("object"==typeof exports?require("jquery"):e.jQuery)}(window),function(e){function t(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function n(e,t){var n=r(e,t)?s:i;n(e,t)}var r,i,s;"classList"in document.documentElement?(r=function(e,t){return e.classList.contains(t)},i=function(e,t){e.classList.add(t)},s=function(e,t){e.classList.remove(t)}):(r=function(e,n){return t(n).test(e.className)},i=function(e,t){r(e,t)||(e.className=e.className+" "+t)},s=function(e,n){e.className=e.className.replace(t(n)," ")});var o={hasClass:r,addClass:i,removeClass:s,toggleClass:n,has:r,add:i,remove:s,toggle:n};"function"==typeof define&&define.amd?define("classie/classie",o):"object"==typeof exports?module.exports=o:e.classie=o}(window),function(e){function t(e){if(e){if("string"==typeof r[e])return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var t,s=0,o=n.length;o>s;s++)if(t=n[s]+e,"string"==typeof r[t])return t}}var n="Webkit Moz ms Ms O".split(" "),r=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):"object"==typeof exports?module.exports=t:e.getStyleProperty=t}(window),function(e){function t(e){var t=parseFloat(e),n=-1===e.indexOf("%")&&!isNaN(t);return n&&t}function n(){}function r(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0,n=o.length;n>t;t++){var r=o[t];e[r]=0}return e}function i(n){function i(){if(!h){h=!0;var r=e.getComputedStyle;if(f=function(){var e=r?function(e){return r(e,null)}:function(e){return e.currentStyle};return function(t){var n=e(t);return n||s("Style returned "+n+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),n}}(),l=n("boxSizing")){var i=document.createElement("div");i.style.width="200px",i.style.padding="1px 2px 3px 4px",i.style.borderStyle="solid",i.style.borderWidth="1px 2px 3px 4px",i.style[l]="border-box";var o=document.body||document.documentElement;o.appendChild(i);var u=f(i);c=200===t(u.width),o.removeChild(i)}}}function u(e){if(i(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var n=f(e);if("none"===n.display)return r();var s={};s.width=e.offsetWidth,s.height=e.offsetHeight;for(var u=s.isBorderBox=!!l&&!!n[l]&&"border-box"===n[l],h=0,v=o.length;v>h;h++){var m=o[h],g=n[m];g=a(e,g);var y=parseFloat(g);s[m]=isNaN(y)?0:y}var b=s.paddingLeft+s.paddingRight,w=s.paddingTop+s.paddingBottom,E=s.marginLeft+s.marginRight,S=s.marginTop+s.marginBottom,x=s.borderLeftWidth+s.borderRightWidth,T=s.borderTopWidth+s.borderBottomWidth,N=u&&c,C=t(n.width);C!==!1&&(s.width=C+(N?0:b+x));var k=t(n.height);return k!==!1&&(s.height=k+(N?0:w+T)),s.innerWidth=s.width-(b+x),s.innerHeight=s.height-(w+T),s.outerWidth=s.width+E,s.outerHeight=s.height+S,s}}function a(t,n){if(e.getComputedStyle||-1===n.indexOf("%"))return n;var r=t.style,i=r.left,s=t.runtimeStyle,o=s&&s.left;return o&&(s.left=t.currentStyle.left),r.left=n,n=r.pixelLeft,r.left=i,o&&(s.left=o),n}var f,l,c,h=!1;return u}var s="undefined"==typeof console?n:function(e){console.error(e)},o=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],i):"object"==typeof exports?module.exports=i(require("desandro-get-style-property")):e.getSize=i(e.getStyleProperty)}(window),function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,r=function(){};n.addEventListener?r=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(r=function(e,n,r){e[n+r]=r.handleEvent?function(){var n=t(e);r.handleEvent.call(r,n)}:function(){var n=t(e);r.call(e,n)},e.attachEvent("on"+n,e[n+r])});var i=function(){};n.removeEventListener?i=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(i=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(r){e[t+n]=void 0}});var s={bind:r,unbind:i};"function"==typeof define&&define.amd?define("eventie/eventie",s):"object"==typeof exports?module.exports=s:e.eventie=s}(window),function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype,i=this,s=i.EventEmitter;r.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,n){var r,i=this.getListenersAsObject(e),s="object"==typeof n;for(r in i)i.hasOwnProperty(r)&&-1===t(i[r],n)&&i[r].push(s?n:{listener:n,once:!1});return this},r.on=n("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=n("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,n){var r,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(r=t(s[i],n),-1!==r&&s[i].splice(r,1));return this},r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.removeAllListeners=n("removeEvent"),r.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(r=o[i].length;r--;)n=o[i][r],n.once===!0&&this.removeListener(e,n.listener),s=n.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=n("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return i.EventEmitter=s,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:i.EventEmitter=e}.call(this),function(e,t){"function"==typeof define&&define.amd?define("unipointer/unipointer",["eventEmitter/EventEmitter","eventie/eventie"],function(n,r){return t(e,n,r)}):"object"==typeof exports?module.exports=t(e,require("wolfy87-eventemitter"),require("eventie")):e.Unipointer=t(e,e.EventEmitter,e.eventie)}(window,function(e,t,n){function r(){}function i(){}i.prototype=new t,i.prototype.bindStartEvent=function(e){this._bindStartEvent(e,!0)},i.prototype.unbindStartEvent=function(e){this._bindStartEvent(e,!1)},i.prototype._bindStartEvent=function(t,r){r=void 0===r?!0:!!r;var i=r?"bind":"unbind";e.navigator.pointerEnabled?n[i](t,"pointerdown",this):e.navigator.msPointerEnabled?n[i](t,"MSPointerDown",this):(n[i](t,"mousedown",this),n[i](t,"touchstart",this))},i.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.prototype.getTouch=function(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];if(r.identifier==this.pointerIdentifier)return r}},i.prototype.onmousedown=function(e){var t=e.button;t&&0!==t&&1!==t||this._pointerDown(e,e)},i.prototype.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},i.prototype.onMSPointerDown=i.prototype.onpointerdown=function(e){this._pointerDown(e,e)},i.prototype._pointerDown=function(e,t){this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,this.pointerDown(e,t))},i.prototype.pointerDown=function(e,t){this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])};var s={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]};return i.prototype._bindPostStartEvents=function(t){if(t){for(var r=s[t.type],i=t.preventDefault?e:document,o=0,u=r.length;u>o;o++){var a=r[o];n.bind(i,a,this)}this._boundPointerEvents={events:r,node:i}}},i.prototype._unbindPostStartEvents=function(){var e=this._boundPointerEvents;if(e&&e.events){for(var t=0,r=e.events.length;r>t;t++){var i=e.events[t];n.unbind(e.node,i,this)}delete this._boundPointerEvents}},i.prototype.onmousemove=function(e){this._pointerMove(e,e)},i.prototype.onMSPointerMove=i.prototype.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},i.prototype.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},i.prototype._pointerMove=function(e,t){this.pointerMove(e,t)},i.prototype.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},i.prototype.onmouseup=function(e){this._pointerUp(e,e)},i.prototype.onMSPointerUp=i.prototype.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},i.prototype.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},i.prototype._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},i.prototype.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},i.prototype._pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this._unbindPostStartEvents(),this.pointerDone()},i.prototype.pointerDone=r,i.prototype.onMSPointerCancel=i.prototype.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},i.prototype.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},i.prototype._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},i.prototype.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},i.getPointerPoint=function(e){return{x:void 0!==e.pageX?e.pageX:e.clientX,y:void 0!==e.pageY?e.pageY:e.clientY}},i}),function(e,t){"function"==typeof define&&define.amd?define("unidragger/unidragger",["eventie/eventie","unipointer/unipointer"],function(n,r){return t(e,n,r)}):"object"==typeof exports?module.exports=t(e,require("eventie"),require("unipointer")):e.Unidragger=t(e,e.eventie,e.Unipointer)}(window,function(e,t,n){function r(){}function i(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function s(e){for(;e!=document.body;)if(e=e.parentNode,"A"==e.nodeName)return e}function o(){}function u(){return!1}o.prototype=new n,o.prototype.bindHandles=function(){this._bindHandles(!0)},o.prototype.unbindHandles=function(){this._bindHandles(!1)};var a=e.navigator;o.prototype._bindHandles=function(e){e=void 0===e?!0:!!e;var n;n=a.pointerEnabled?function(t){t.style.touchAction=e?"none":""}:a.msPointerEnabled?function(t){t.style.msTouchAction=e?"none":""}:function(){e&&l(o)};for(var r=e?"bind":"unbind",i=0,s=this.handles.length;s>i;i++){var o=this.handles[i];this._bindStartEvent(o,e),n(o),t[r](o,"click",this)}};var f="attachEvent"in document.documentElement,l=f?function(e){"IMG"==e.nodeName&&(e.ondragstart=u);for(var t=e.querySelectorAll("img"),n=0,r=t.length;r>n;n++){var i=t[n];i.ondragstart=u}}:r,c=o.allowTouchstartNodes={INPUT:!0,A:!0,BUTTON:!0,SELECT:!0};return o.prototype.pointerDown=function(e,t){this._dragPointerDown(e,t);var n=document.activeElement;n&&n.blur&&n.blur(),this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])},o.prototype._dragPointerDown=function(e,t){this.pointerDownPoint=n.getPointerPoint(t);var r=e.target.nodeName,o="touchstart"==e.type&&(c[r]||s(e.target));o||"SELECT"==r||i(e)},o.prototype.pointerMove=function(e,t){var n=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,n]),this._dragMove(e,t,n)},o.prototype._dragPointerMove=function(e,t){var r=n.getPointerPoint(t),i={x:r.x-this.pointerDownPoint.x,y:r.y-this.pointerDownPoint.y};return!this.isDragging&&this.hasDragStarted(i)&&this._dragStart(e,t),i},o.prototype.hasDragStarted=function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3},o.prototype.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},o.prototype._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},o.prototype._dragStart=function(e,t){this.isDragging=!0,this.dragStartPoint=o.getPointerPoint(t),this.isPreventingClicks=!0,this.dragStart(e,t)},o.prototype.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},o.prototype._dragMove=function(e,t,n){this.isDragging&&this.dragMove(e,t,n)},o.prototype.dragMove=function(e,t,n){this.emitEvent("dragMove",[e,t,n])},o.prototype._dragEnd=function(e,t){this.isDragging=!1;var n=this;setTimeout(function(){delete n.isPreventingClicks}),this.dragEnd(e,t)},o.prototype.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},o.prototype.onclick=function(e){this.isPreventingClicks&&i(e)},o.prototype._staticClick=function(e,t){"INPUT"==e.target.nodeName&&"text"==e.target.type&&e.target.focus(),this.staticClick(e,t)},o.prototype.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},o.getPointerPoint=function(e){return{x:void 0!==e.pageX?e.pageX:e.clientX,y:void 0!==e.pageY?e.pageY:e.clientY}},o.getPointerPoint=n.getPointerPoint,o}),function(e,t){"function"==typeof define&&define.amd?define("vendor/packery/draggabilly.pkgd.min",["classie/classie","get-style-property/get-style-property","get-size/get-size","unidragger/unidragger"],function(n,r,i,s){return t(e,n,r,i,s)}):"object"==typeof exports?module.exports=t(e,require("desandro-classie"),require("desandro-get-style-property"),require("get-size"),require("unidragger")):e.Draggabilly=t(e,e.classie,e.getStyleProperty,e.getSize,e.Unidragger)}(window,function(e,t,n,r,i){function s(){}function o(e,t){for(var n in t)e[n]=t[n];return e}function u(e,t){this.element="string"==typeof e?l.querySelector(e):e,E&&(this.$element=E(this.element)),this.options=o({},this.constructor.defaults),this.option(t),this._create()}function a(e,t,n){return n=n||"round",t?Math[n](e/t)*t:e}for(var f,l=e.document,c=l.defaultView,h=c&&c.getComputedStyle?function(e){return c.getComputedStyle(e,null)}:function(e){return e.currentStyle},p="object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1==e.nodeType&&"string"==typeof e.nodeName},d=0,v="webkit moz ms o".split(" "),m=e.requestAnimationFrame,g=e.cancelAnimationFrame,y=0;y<v.length&&(!m||!g);y++)f=v[y],m=m||e[f+"RequestAnimationFrame"],g=g||e[f+"CancelAnimationFrame"]||e[f+"CancelRequestAnimationFrame"];m&&g||(m=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-d)),i=e.setTimeout(function(){t(n+r)},r);return d=n+r,i},g=function(t){e.clearTimeout(t)});var b=n("transform"),w=!!n("perspective"),E=e.jQuery;o(u.prototype,i.prototype),u.defaults={},u.prototype.option=function(e){o(this.options,e)},u.prototype._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=o({},this.position);var e=h(this.element);"relative"!=e.position&&"absolute"!=e.position&&(this.element.style.position="relative"),this.enable(),this.setHandles()},u.prototype.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},u.prototype.dispatchEvent=function(t,n,r){var i=[n].concat(r);this.emitEvent(t,i);var s=e.jQuery;if(s&&this.$element)if(n){var o=s.Event(n);o.type=t,this.$element.trigger(o,r)}else this.$element.trigger(t,r)},u.prototype._getPosition=function(){var e=h(this.element),t=parseInt(e.left,10),n=parseInt(e.top,10);this.position.x=isNaN(t)?0:t,this.position.y=isNaN(n)?0:n,this._addTransformPosition(e)},u.prototype._addTransformPosition=function(e){if(b){var t=e[b];if(0===t.indexOf("matrix")){var n=t.split(","),r=0===t.indexOf("matrix3d")?12:4,i=parseInt(n[r],10),s=parseInt(n[r+1],10);this.position.x+=i,this.position.y+=s}}},u.prototype.pointerDown=function(e,n){this._dragPointerDown(e,n);var r=l.activeElement;r&&r.blur&&r.blur(),this._bindPostStartEvents(e),t.add(this.element,"is-pointer-down"),this.dispatchEvent("pointerDown",e,[n])},u.prototype.pointerMove=function(e,t){var n=this._dragPointerMove(e,t);this.dispatchEvent("pointerMove",e,[t,n]),this._dragMove(e,t,n)},u.prototype.dragStart=function(e,n){this.isEnabled&&(this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.isDragging=!0,t.add(this.element,"is-dragging"),this.dispatchEvent("dragStart",e,[n]),this.animate())},u.prototype.measureContainment=function(){var e=this.options.containment;if(e){this.size=r(this.element);var t=this.element.getBoundingClientRect(),n=p(e)?e:"string"==typeof e?l.querySelector(e):this.element.parentNode;this.containerSize=r(n);var i=n.getBoundingClientRect();this.relativeStartPosition={x:t.left-i.left,y:t.top-i.top}}},u.prototype.dragMove=function(e,t,n){if(this.isEnabled){var r=n.x,i=n.y,s=this.options.grid,o=s&&s[0],u=s&&s[1];r=a(r,o),i=a(i,u),r=this.containDrag("x",r,o),i=this.containDrag("y",i,u),r="y"==this.options.axis?0:r,i="x"==this.options.axis?0:i,this.position.x=this.startPosition.x+r,this.position.y=this.startPosition.y+i,this.dragPoint.x=r,this.dragPoint.y=i,this.dispatchEvent("dragMove",e,[t,n])}},u.prototype.containDrag=function(e,t,n){if(!this.options.containment)return t;var r="x"==e?"width":"height",i=this.relativeStartPosition[e],s=a(-i,n,"ceil"),o=this.containerSize[r]-i-this.size[r];return o=a(o,n,"floor"),Math.min(o,Math.max(s,t))},u.prototype.pointerUp=function(e,n){t.remove(this.element,"is-pointer-down"),this.dispatchEvent("pointerUp",e,[n]),this._dragPointerUp(e,n)},u.prototype.dragEnd=function(e,n){this.isEnabled&&(this.isDragging=!1,b&&(this.element.style[b]="",this.setLeftTop()),t.remove(this.element,"is-dragging"),this.dispatchEvent("dragEnd",e,[n]))},u.prototype.animate=function(){if(this.isDragging){this.positionDrag();var e=this;m(function(){e.animate()})}};var S=w?function(e,t){return"translate3d( "+e+"px, "+t+"px, 0)"}:function(e,t){return"translate( "+e+"px, "+t+"px)"};return u.prototype.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},u.prototype.positionDrag=b?function(){this.element.style[b]=S(this.dragPoint.x,this.dragPoint.y)}:u.prototype.setLeftTop,u.prototype.staticClick=function(e,t){this.dispatchEvent("staticClick",e,[t])},u.prototype.enable=function(){this.isEnabled=!0},u.prototype.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},u.prototype.destroy=function(){this.disable(),b&&(this.element.style[b]=""),this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},u.prototype._init=s,E&&E.bridget&&E.bridget("draggabilly",u),u}),!function(e){function t(){}function n(e){function n(t){t.prototype.option||(t.prototype.option=function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))})}function i(t,n){e.fn[t]=function(i){if("string"==typeof i){for(var o=r.call(arguments,1),u=0,l=this.length;l>u;u++){var h=this[u],p=e.data(h,t);if(p)if(e.isFunction(p[i])&&"_"!==i.charAt(0)){var v=p[i].apply(p,o);if(void 0!==v)return v}else s("no such method '"+i+"' for "+t+" instance");else s("cannot call methods on "+t+" prior to initialization; attempted to call '"+i+"'")}return this}return this.each(function(){var r=e.data(this,t);r?(r.option(i),r._init()):(r=new n(this,i),e.data(this,t,r))})}}if(e){var s="undefined"==typeof console?t:function(e){console.error(e)};return e.bridget=function(e,t){n(t),i(e,t)},e.bridget}}var r=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],n):n("object"==typeof exports?require("jquery"):e.jQuery)}(window),function(e){function t(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function n(e,t){var n=r(e,t)?s:i;n(e,t)}var r,i,s;"classList"in document.documentElement?(r=function(e,t){return e.classList.contains(t)},i=function(e,t){e.classList.add(t)},s=function(e,t){e.classList.remove(t)}):(r=function(e,n){return t(n).test(e.className)},i=function(e,t){r(e,t)||(e.className=e.className+" "+t)},s=function(e,n){e.className=e.className.replace(t(n)," ")});var o={hasClass:r,addClass:i,removeClass:s,toggleClass:n,has:r,add:i,remove:s,toggle:n};"function"==typeof define&&define.amd?define("classie/classie",o):"object"==typeof exports?module.exports=o:e.classie=o}(window),function(e){function t(e){if(e){if("string"==typeof r[e])return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var t,i=0,s=n.length;s>i;i++)if(t=n[i]+e,"string"==typeof r[t])return t}}var n="Webkit Moz ms Ms O".split(" "),r=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):"object"==typeof exports?module.exports=t:e.getStyleProperty=t}(window),function(e,t){function n(e){var t=parseFloat(e),n=-1===e.indexOf("%")&&!isNaN(t);return n&&t}function r(){}function i(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0,n=u.length;n>t;t++){var r=u[t];e[r]=0}return e}function s(t){function r(){if(!v){v=!0;var r=e.getComputedStyle;if(l=function(){var e=r?function(e){return r(e,null)}:function(e){return e.currentStyle};return function(t){var n=e(t);return n||o("Style returned "+n+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),n}}(),p=t("boxSizing")){var i=document.createElement("div");i.style.width="200px",i.style.padding="1px 2px 3px 4px",i.style.borderStyle="solid",i.style.borderWidth="1px 2px 3px 4px",i.style[p]="border-box";var s=document.body||document.documentElement;s.appendChild(i);var u=l(i);d=200===n(u.width),s.removeChild(i)}}}function s(e){if(r(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var t=l(e);if("none"===t.display)return i();var s={};s.width=e.offsetWidth,s.height=e.offsetHeight;for(var o=s.isBorderBox=!!p&&!!t[p]&&"border-box"===t[p],a=0,v=u.length;v>a;a++){var m=u[a],g=t[m];g=f(e,g);var y=parseFloat(g);s[m]=isNaN(y)?0:y}var b=s.paddingLeft+s.paddingRight,w=s.paddingTop+s.paddingBottom,E=s.marginLeft+s.marginRight,S=s.marginTop+s.marginBottom,x=s.borderLeftWidth+s.borderRightWidth,T=s.borderTopWidth+s.borderBottomWidth,N=o&&d,C=n(t.width);C!==!1&&(s.width=C+(N?0:b+x));var L=n(t.height);return L!==!1&&(s.height=L+(N?0:w+T)),s.innerWidth=s.width-(b+x),s.innerHeight=s.height-(w+T),s.outerWidth=s.width+E,s.outerHeight=s.height+S,s}}function f(t,n){if(e.getComputedStyle||-1===n.indexOf("%"))return n;var r=t.style,i=r.left,s=t.runtimeStyle,o=s&&s.left;return o&&(s.left=t.currentStyle.left),r.left=n,n=r.pixelLeft,r.left=i,o&&(s.left=o),n}var l,p,d,v=!1;return s}var o="undefined"==typeof console?r:function(e){console.error(e)},u=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],s):"object"==typeof exports?module.exports=s(require("desandro-get-style-property")):e.getSize=s(e.getStyleProperty)}(window),function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,r=function(){};n.addEventListener?r=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(r=function(e,n,r){e[n+r]=r.handleEvent?function(){var n=t(e);r.handleEvent.call(r,n)}:function(){var n=t(e);r.call(e,n)},e.attachEvent("on"+n,e[n+r])});var i=function(){};n.removeEventListener?i=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(i=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(r){e[t+n]=void 0}});var s={bind:r,unbind:i};"function"==typeof define&&define.amd?define("eventie/eventie",s):"object"==typeof exports?module.exports=s:e.eventie=s}(window),function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype,i=this,s=i.EventEmitter;r.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,n){var r,i=this.getListenersAsObject(e),s="object"==typeof n;for(r in i)i.hasOwnProperty(r)&&-1===t(i[r],n)&&i[r].push(s?n:{listener:n,once:!1});return this},r.on=n("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=n("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,n){var r,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(r=t(s[i],n),-1!==r&&s[i].splice(r,1));return this},r.off=n("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},r.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.removeAllListeners=n("removeEvent"),r.emitEvent=function(e,t){var n,r,i,s,o=this.getListenersAsObject(e);for(i in o)if(o.hasOwnProperty(i))for(r=o[i].length;r--;)n=o[i][r],n.once===!0&&this.removeListener(e,n.listener),s=n.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=n("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return i.EventEmitter=s,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:i.EventEmitter=e}.call(this),function(e){function t(e){"function"==typeof e&&(t.isReady?e():o.push(e))}function n(e){var n="readystatechange"===e.type&&"complete"!==s.readyState;t.isReady||n||r()}function r(){t.isReady=!0;for(var e=0,n=o.length;n>e;e++){var r=o[e];r()}}function i(i){return"complete"===s.readyState?r():(i.bind(s,"DOMContentLoaded",n),i.bind(s,"readystatechange",n),i.bind(e,"load",n)),t}var s=e.document,o=[];t.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],i):"object"==typeof exports?module.exports=i(require("eventie")):e.docReady=i(e.eventie)}(window),function(e){function t(e,t){return e[o](t)}function n(e){if(!e.parentNode){var t=document.createDocumentFragment();t.appendChild(e)}}function r(e,t){n(e);for(var r=e.parentNode.querySelectorAll(t),i=0,s=r.length;s>i;i++)if(r[i]===e)return!0;return!1}function i(e,r){return n(e),t(e,r)}var s,o=function(){if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],n=0,r=t.length;r>n;n++){var i=t[n],s=i+"MatchesSelector";if(e[s])return s}}();if(o){var u=document.createElement("div"),a=t(u,"div");s=a?t:i}else s=r;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return s}):"object"==typeof exports?module.exports=s:window.matchesSelector=s}(Element.prototype),function(e,t){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["doc-ready/doc-ready","matches-selector/matches-selector"],function(n,r){return t(e,n,r)}):"object"==typeof exports?module.exports=t(e,require("doc-ready"),require("desandro-matches-selector")):e.fizzyUIUtils=t(e,e.docReady,e.matchesSelector)}(window,function(e,t,n){var r={};r.extend=function(e,t){for(var n in t)e[n]=t[n];return e},r.modulo=function(e,t){return(e%t+t)%t};var i=Object.prototype.toString;r.isArray=function(e){return"[object Array]"==i.call(e)},r.makeArray=function(e){var t=[];if(r.isArray(e))t=e;else if(e&&"number"==typeof e.length)for(var n=0,i=e.length;i>n;n++)t.push(e[n]);else t.push(e);return t},r.indexOf=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},r.removeFrom=function(e,t){var n=r.indexOf(e,t);-1!=n&&e.splice(n,1)},r.isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1==e.nodeType&&"string"==typeof e.nodeName},r.setText=function(){function e(e,n){t=t||(void 0!==document.documentElement.textContent?"textContent":"innerText"),e[t]=n}var t;return e}(),r.getParent=function(e,t){for(;e!=document.body;)if(e=e.parentNode,n(e,t))return e},r.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},r.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.filterFindElements=function(e,t){e=r.makeArray(e);for(var i=[],s=0,o=e.length;o>s;s++){var u=e[s];if(r.isElement(u))if(t){n(u,t)&&i.push(u);for(var a=u.querySelectorAll(t),f=0,l=a.length;l>f;f++)i.push(a[f])}else i.push(u)}return i},r.debounceMethod=function(e,t,n){var r=e.prototype[t],i=t+"Timeout";e.prototype[t]=function(){var e=this[i];e&&clearTimeout(e);var t=arguments,s=this;this[i]=setTimeout(function(){r.apply(s,t),delete s[i]},n||100)}},r.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,n){return t+"-"+n}).toLowerCase()};var s=e.console;return r.htmlInit=function(n,i){t(function(){for(var t=r.toDashed(i),o=document.querySelectorAll(".js-"+t),u="data-"+t+"-options",l=0,h=o.length;h>l;l++){var p,v=o[l],m=v.getAttribute(u);try{p=m&&JSON.parse(m)}catch(g){s&&s.error("Error parsing "+u+" on "+v.nodeName.toLowerCase()+(v.id?"#"+v.id:"")+": "+g);continue}var y=new n(v,p),b=e.jQuery;b&&b.data(v,i,y)}})},r}),function(e,t){"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(n,r,i,s){return t(e,n,r,i,s)}):"object"==typeof exports?module.exports=t(e,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(e.Outlayer={},e.Outlayer.Item=t(e,e.EventEmitter,e.getSize,e.getStyleProperty,e.fizzyUIUtils))}(window,function(e,t,n,r,i){function s(e){for(var t in e)return!1;return t=null,!0}function o(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}function u(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}var a=e.getComputedStyle,f=a?function(e){return a(e,null)}:function(e){return e.currentStyle},l=r("transition"),c=r("transform"),h=l&&c,p=!!r("perspective"),d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[l],v=["transform","transition","transitionDuration","transitionProperty"],m=function(){for(var e={},t=0,n=v.length;n>t;t++){var i=v[t],s=r(i);s&&s!==i&&(e[i]=s)}return e}();i.extend(o.prototype,t.prototype),o.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},o.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},o.prototype.getSize=function(){this.size=n(this.element)},o.prototype.css=function(e){var t=this.element.style;for(var n in e){var r=m[n]||n;t[r]=e[n]}},o.prototype.getPosition=function(){var e=f(this.element),t=this.layout.options,n=t.isOriginLeft,r=t.isOriginTop,i=e[n?"left":"right"],s=e[r?"top":"bottom"],o=this.layout.size,u=-1!=i.indexOf("%")?parseFloat(i)/100*o.width:parseInt(i,10),a=-1!=s.indexOf("%")?parseFloat(s)/100*o.height:parseInt(s,10);u=isNaN(u)?0:u,a=isNaN(a)?0:a,u-=n?o.paddingLeft:o.paddingRight,a-=r?o.paddingTop:o.paddingBottom,this.position.x=u,this.position.y=a},o.prototype.layoutPosition=function(){var e=this.layout.size,t=this.layout.options,n={},r=t.isOriginLeft?"paddingLeft":"paddingRight",i=t.isOriginLeft?"left":"right",s=t.isOriginLeft?"right":"left",o=this.position.x+e[r];n[i]=this.getXValue(o),n[s]="";var u=t.isOriginTop?"paddingTop":"paddingBottom",a=t.isOriginTop?"top":"bottom",f=t.isOriginTop?"bottom":"top",l=this.position.y+e[u];n[a]=this.getYValue(l),n[f]="",this.css(n),this.emitEvent("layout",[this])},o.prototype.getXValue=function(e){var t=this.layout.options;return t.percentPosition&&!t.isHorizontal?e/this.layout.size.width*100+"%":e+"px"},o.prototype.getYValue=function(e){var t=this.layout.options;return t.percentPosition&&t.isHorizontal?e/this.layout.size.height*100+"%":e+"px"},o.prototype._transitionTo=function(e,t){this.getPosition();var n=this.position.x,r=this.position.y,i=parseInt(e,10),s=parseInt(t,10),o=i===this.position.x&&s===this.position.y;if(this.setPosition(e,t),o&&!this.isTransitioning)return void this.layoutPosition();var u=e-n,a=t-r,f={};f.transform=this.getTranslate(u,a),this.transition({to:f,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},o.prototype.getTranslate=function(e,t){var n=this.layout.options;return e=n.isOriginLeft?e:-e,t=n.isOriginTop?t:-t,p?"translate3d("+e+"px, "+t+"px, 0)":"translate("+e+"px, "+t+"px)"},o.prototype.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},o.prototype.moveTo=h?o.prototype._transitionTo:o.prototype.goTo,o.prototype.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},o.prototype._nonTransition=function(e){this.css(e.to),e.isCleaning&&this._removeStyles(e.to);for(var t in e.onTransitionEnd)e.onTransitionEnd[t].call(this)},o.prototype._transition=function(e){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(e);var t=this._transn;for(var n in e.onTransitionEnd)t.onEnd[n]=e.onTransitionEnd[n];for(n in e.to)t.ingProperties[n]=!0,e.isCleaning&&(t.clean[n]=!0);if(e.from){this.css(e.from);var r=this.element.offsetHeight;r=null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0};var g="opacity,"+u(m.transform||"transform");o.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:g,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(d,this,!1))},o.prototype.transition=o.prototype[l?"_transition":"_nonTransition"],o.prototype.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},o.prototype.onotransitionend=function(e){this.ontransitionend(e)};var y={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};o.prototype.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,n=y[e.propertyName]||e.propertyName;if(delete t.ingProperties[n],s(t.ingProperties)&&this.disableTransition(),n in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[n]),n in t.onEnd){var r=t.onEnd[n];r.call(this),delete t.onEnd[n]}this.emitEvent("transitionEnd",[this])}},o.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(d,this,!1),this.isTransitioning=!1},o.prototype._removeStyles=function(e){var t={};for(var n in e)t[n]="";this.css(t)};var b={transitionProperty:"",transitionDuration:""};return o.prototype.removeTransitionStyles=function(){this.css(b)},o.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},o.prototype.remove=function(){if(!l||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var e=this;this.once("transitionEnd",function(){e.removeElem()}),this.hide()},o.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={},n=this.getHideRevealTransitionEndProperty("visibleStyle");t[n]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},o.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},o.prototype.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity)return"opacity";for(var n in t)return n},o.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={},n=this.getHideRevealTransitionEndProperty("hiddenStyle");t[n]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},o.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},o.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},o}),function(e,t){"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(n,r,i,s,o){return t(e,n,r,i,s,o)}):"object"==typeof exports?module.exports=t(e,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):e.Outlayer=t(e,e.eventie,e.EventEmitter,e.getSize,e.fizzyUIUtils,e.Outlayer.Item)}(window,function(e,t,n,r,i,s){function o(e,t){var n=i.getQueryElement(e);if(!n)return void (u&&u.error("Bad element for "+this.constructor.namespace+": "+(n||e)));this.element=n,a&&(this.$element=a(this.element)),this.options=i.extend({},this.constructor.defaults),this.option(t);var r=++l;this.element.outlayerGUID=r,c[r]=this,this._create(),this.options.isInitLayout&&this.layout()}var u=e.console,a=e.jQuery,f=function(){},l=0,c={};return o.namespace="outlayer",o.Item=s,o.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},i.extend(o.prototype,n.prototype),o.prototype.option=function(e){i.extend(this.options,e)},o.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),i.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},o.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},o.prototype._itemize=function(e){for(var t=this._filterFindItemElements(e),n=this.constructor.Item,r=[],i=0,s=t.length;s>i;i++){var o=t[i],u=new n(o,this);r.push(u)}return r},o.prototype._filterFindItemElements=function(e){return i.filterFindElements(e,this.options.itemSelector)},o.prototype.getItemElements=function(){for(var e=[],t=0,n=this.items.length;n>t;t++)e.push(this.items[t].element);return e},o.prototype.layout=function(){this._resetLayout(),this._manageStamps();var e=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},o.prototype._init=o.prototype.layout,o.prototype._resetLayout=function(){this.getSize()},o.prototype.getSize=function(){this.size=r(this.element)},o.prototype._getMeasurement=function(e,t){var n,s=this.options[e];s?("string"==typeof s?n=this.element.querySelector(s):i.isElement(s)&&(n=s),this[e]=n?r(n)[t]:s):this[e]=0},o.prototype.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},o.prototype._getItemsForLayout=function(e){for(var t=[],n=0,r=e.length;r>n;n++){var i=e[n];i.isIgnored||t.push(i)}return t},o.prototype._layoutItems=function(e,t){if(this._emitCompleteOnItems("layout",e),e&&e.length){for(var n=[],r=0,i=e.length;i>r;r++){var s=e[r],o=this._getItemLayoutPosition(s);o.item=s,o.isInstant=t||s.isLayoutInstant,n.push(o)}this._processLayoutQueue(n)}},o.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},o.prototype._processLayoutQueue=function(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];this._positionItem(r.item,r.x,r.y,r.isInstant)}},o.prototype._positionItem=function(e,t,n,r){r?e.goTo(t,n):e.moveTo(t,n)},o.prototype._postLayout=function(){this.resizeContainer()},o.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},o.prototype._getContainerSize=f,o.prototype._setContainerMeasure=function(e,t){if(void 0!==e){var n=this.size;n.isBorderBox&&(e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},o.prototype._emitCompleteOnItems=function(e,t){function n(){i.dispatchEvent(e+"Complete",null,[t])}function r(){o++,o===s&&n()}var i=this,s=t.length;if(!t||!s)return void n();for(var o=0,u=0,a=t.length;a>u;u++){var f=t[u];f.once(e,r)}},o.prototype.dispatchEvent=function(e,t,n){var r=t?[t].concat(n):n;if(this.emitEvent(e,r),a)if(this.$element=this.$element||a(this.element),t){var i=a.Event(t);i.type=e,this.$element.trigger(i,n)}else this.$element.trigger(e,n)},o.prototype.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},o.prototype.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},o.prototype.stamp=function(e){if(e=this._find(e)){this.stamps=this.stamps.concat(e);for(var t=0,n=e.length;n>t;t++){var r=e[t];this.ignore(r)}}},o.prototype.unstamp=function(e){if(e=this._find(e))for(var t=0,n=e.length;n>t;t++){var r=e[t];i.removeFrom(this.stamps,r),this.unignore(r)}},o.prototype._find=function(e){return e?("string"==typeof e&&(e=this.element.querySelectorAll(e)),e=i.makeArray(e)):void 0},o.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var e=0,t=this.stamps.length;t>e;e++){var n=this.stamps[e];this._manageStamp(n)}}},o.prototype._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},o.prototype._manageStamp=f,o.prototype._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,i=r(e),s={left:t.left-n.left-i.marginLeft,top:t.top-n.top-i.marginTop,right:n.right-t.right-i.marginRight,bottom:n.bottom-t.bottom-i.marginBottom};return s},o.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},o.prototype.bindResize=function(){this.isResizeBound||(t.bind(e,"resize",this),this.isResizeBound=!0)},o.prototype.unbindResize=function(){this.isResizeBound&&t.unbind(e,"resize",this),this.isResizeBound=!1},o.prototype.onresize=function(){function e(){t.resize(),delete t.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var t=this;this.resizeTimeout=setTimeout(e,100)},o.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},o.prototype.needsResizeLayout=function(){var e=r(this.element),t=this.size&&e;return t&&e.innerWidth!==this.size.innerWidth},o.prototype.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},o.prototype.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},o.prototype.prepended=function(e){var t=this._itemize(e);if(t.length){var n=this.items.slice(0);this.items=t.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(n)}},o.prototype.reveal=function(e){this._emitCompleteOnItems("reveal",e);for(var t=e&&e.length,n=0;t&&t>n;n++){var r=e[n];r.reveal()}},o.prototype.hide=function(e){this._emitCompleteOnItems("hide",e);for(var t=e&&e.length,n=0;t&&t>n;n++){var r=e[n];r.hide()}},o.prototype.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)},o.prototype.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)},o.prototype.getItem=function(e){for(var t=0,n=this.items.length;n>t;t++){var r=this.items[t];if(r.element===e)return r}},o.prototype.getItems=function(e){e=i.makeArray(e);for(var t=[],n=0,r=e.length;r>n;n++){var s=e[n],o=this.getItem(s);o&&t.push(o)}return t},o.prototype.remove=function(e){var t=this.getItems(e);if(this._emitCompleteOnItems("remove",t),t&&t.length)for(var n=0,r=t.length;r>n;n++){var s=t[n];s.remove(),i.removeFrom(this.items,s)}},o.prototype.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="";for(var t=0,n=this.items.length;n>t;t++){var r=this.items[t];r.destroy()}this.unbindResize();var i=this.element.outlayerGUID;delete c[i],delete this.element.outlayerGUID,a&&a.removeData(this.element,this.constructor.namespace)},o.data=function(e){e=i.getQueryElement(e);var t=e&&e.outlayerGUID;return t&&c[t]},o.create=function(e,t){function n(){o.apply(this,arguments)}return Object.create?n.prototype=Object.create(o.prototype):i.extend(n.prototype,o.prototype),n.prototype.constructor=n,n.defaults=i.extend({},o.defaults),i.extend(n.defaults,t),n.prototype.settings={},n.namespace=e,n.data=o.data,n.Item=function(){s.apply(this,arguments)},n.Item.prototype=new s,i.htmlInit(n,e),a&&a.bridget&&a.bridget(e,n),n},o.Item=s,o}),function(e,t){"function"==typeof define&&define.amd?define("packery/js/rect",t):"object"==typeof exports?module.exports=t():(e.Packery=e.Packery||{},e.Packery.Rect=t())}(window,function(){function e(t){for(var n in e.defaults)this[n]=e.defaults[n];for(n in t)this[n]=t[n]}var t=window.Packery=function(){};return t.Rect=e,e.defaults={x:0,y:0,width:0,height:0},e.prototype.contains=function(e){var t=e.width||0,n=e.height||0;return this.x<=e.x&&this.y<=e.y&&this.x+this.width>=e.x+t&&this.y+this.height>=e.y+n},e.prototype.overlaps=function(e){var t=this.x+this.width,n=this.y+this.height,r=e.x+e.width,i=e.y+e.height;return this.x<r&&t>e.x&&this.y<i&&n>e.y},e.prototype.getMaximalFreeRects=function(t){if(!this.overlaps(t))return!1;var n,r=[],i=this.x+this.width,s=this.y+this.height,o=t.x+t.width,u=t.y+t.height;return this.y<t.y&&(n=new e({x:this.x,y:this.y,width:this.width,height:t.y-this.y}),r.push(n)),i>o&&(n=new e({x:o,y:this.y,width:i-o,height:this.height}),r.push(n)),s>u&&(n=new e({x:this.x,y:u,width:this.width,height:s-u}),r.push(n)),this.x<t.x&&(n=new e({x:this.x,y:this.y,width:t.x-this.x,height:this.height}),r.push(n)),r},e.prototype.canFit=function(e){return this.width>=e.width&&this.height>=e.height},e}),function(e,t){if("function"==typeof define&&define.amd)define("packery/js/packer",["./rect"],t);else if("object"==typeof exports)module.exports=t(require("./rect"));else{var n=e.Packery=e.Packery||{};n.Packer=t(n.Rect)}}(window,function(e){function t(e,t,n){this.width=e||0,this.height=t||0,this.sortDirection=n||"downwardLeftToRight",this.reset()}t.prototype.reset=function(){this.spaces=[],this.newSpaces=[];var t=new e({x:0,y:0,width:this.width,height:this.height});this.spaces.push(t),this.sorter=n[this.sortDirection]||n.downwardLeftToRight},t.prototype.pack=function(e){for(var t=0,n=this.spaces.length;n>t;t++){var r=this.spaces[t];if(r.canFit(e)){this.placeInSpace(e,r);break}}},t.prototype.placeInSpace=function(e,t){e.x=t.x,e.y=t.y,this.placed(e)},t.prototype.placed=function(e){for(var t=[],n=0,r=this.spaces.length;r>n;n++){var i=this.spaces[n],s=i.getMaximalFreeRects(e);s?t.push.apply(t,s):t.push(i)}this.spaces=t,this.mergeSortSpaces()},t.prototype.mergeSortSpaces=function(){t.mergeRects(this.spaces),this.spaces.sort(this.sorter)},t.prototype.addSpace=function(e){this.spaces.push(e),this.mergeSortSpaces()},t.mergeRects=function(e){for(var t=0,n=e.length;n>t;t++){var r=e[t];if(r){var i=e.slice(0);i.splice(t,1);for(var s=0,o=0,u=i.length;u>o;o++){var a=i[o],f=t>o?0:1;r.contains(a)&&(e.splice(o+f-s,1),s++)}}}return e};var n={downwardLeftToRight:function(e,t){return e.y-t.y||e.x-t.x},rightwardTopToBottom:function(e,t){return e.x-t.x||e.y-t.y}};return t}),function(e,t){"function"==typeof define&&define.amd?define("packery/js/item",["get-style-property/get-style-property","outlayer/outlayer","./rect"],t):"object"==typeof exports?module.exports=t(require("desandro-get-style-property"),require("outlayer"),require("./rect")):e.Packery.Item=t(e.getStyleProperty,e.Outlayer,e.Packery.Rect)}(window,function(e,t,n){var r=e("transform"),i=function(){t.Item.apply(this,arguments)};i.prototype=new t.Item;var s=i.prototype._create;return i.prototype._create=function(){s.call(this),this.rect=new n,this.placeRect=new n},i.prototype.dragStart=function(){this.getPosition(),this.removeTransitionStyles(),this.isTransitioning&&r&&(this.element.style[r]="none"),this.getSize(),this.isPlacing=!0,this.needsPositioning=!1,this.positionPlaceRect(this.position.x,this.position.y),this.isTransitioning=!1,this.didDrag=!1},i.prototype.dragMove=function(e,t){this.didDrag=!0;var n=this.layout.size;e-=n.paddingLeft,t-=n.paddingTop,this.positionPlaceRect(e,t)},i.prototype.dragStop=function(){this.getPosition();var e=this.position.x!=this.placeRect.x,t=this.position.y!=this.placeRect.y;this.needsPositioning=e||t,this.didDrag=!1},i.prototype.positionPlaceRect=function(e,t,n){this.placeRect.x=this.getPlaceRectCoord(e,!0),this.placeRect.y=this.getPlaceRectCoord(t,!1,n)},i.prototype.getPlaceRectCoord=function(e,t,n){var r=t?"Width":"Height",i=this.size["outer"+r],s=this.layout[t?"columnWidth":"rowHeight"],o=this.layout.size["inner"+r];t||(o=Math.max(o,this.layout.maxY),this.layout.rowHeight||(o-=this.layout.gutter));var u;if(s){s+=this.layout.gutter,o+=t?this.layout.gutter:0,e=Math.round(e/s);var a;a=this.layout.options.isHorizontal?t?"ceil":"floor":t?"floor":"ceil";var f=Math[a](o/s);f-=Math.ceil(i/s),u=f}else u=o-i;return e=n?e:Math.min(e,u),e*=s||1,Math.max(0,e)},i.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x,this.rect.y=this.placeRect.y},i.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.layout.packer.addSpace(this.rect),this.emitEvent("remove",[this])},i}),function(e,t){"function"==typeof define&&define.amd?define("vendor/packery/packery.pkgd.min",["classie/classie","get-size/get-size","outlayer/outlayer","packery/js/rect","packery/js/packer","packery/js/item"],t):"object"==typeof exports?module.exports=t(require("desandro-classie"),require("get-size"),require("outlayer"),require("./rect"),require("./packer"),require("./item")):e.Packery=t(e.classie,e.getSize,e.Outlayer,e.Packery.Rect,e.Packery.Packer,e.Packery.Item)}(window,function(e,t,n,r,i,s){function o(e,t){return e.position.y-t.position.y||e.position.x-t.position.x}function u(e,t){return e.position.x-t.position.x||e.position.y-t.position.y}r.prototype.canFit=function(e){return this.width>=e.width-1&&this.height>=e.height-1};var a=n.create("packery");return a.Item=s,a.prototype._create=function(){n.prototype._create.call(this),this.packer=new i,this.stamp(this.options.stamped);var e=this;this.handleDraggabilly={dragStart:function(){e.itemDragStart(this.element)},dragMove:function(){e.itemDragMove(this.element,this.position.x,this.position.y)},dragEnd:function(){e.itemDragEnd(this.element)}},this.handleUIDraggable={start:function(t,n){n&&e.itemDragStart(t.currentTarget)},drag:function(t,n){n&&e.itemDragMove(t.currentTarget,n.position.left,n.position.top)},stop:function(t,n){n&&e.itemDragEnd(t.currentTarget)}}},a.prototype._resetLayout=function(){this.getSize(),this._getMeasurements();var e=this.packer;this.options.isHorizontal?(e.width=Number.POSITIVE_INFINITY,e.height=this.size.innerHeight+this.gutter,e.sortDirection="rightwardTopToBottom"):(e.width=this.size.innerWidth+this.gutter,e.height=Number.POSITIVE_INFINITY,e.sortDirection="downwardLeftToRight"),e.reset(),this.maxY=0,this.maxX=0},a.prototype._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},a.prototype._getItemLayoutPosition=function(e){return this._packItem(e),e.rect},a.prototype._packItem=function(e){this._setRectSize(e.element,e.rect),this.packer.pack(e.rect),this._setMaxXY(e.rect)},a.prototype._setMaxXY=function(e){this.maxX=Math.max(e.x+e.width,this.maxX),this.maxY=Math.max(e.y+e.height,this.maxY)},a.prototype._setRectSize=function(e,n){var r=t(e),i=r.outerWidth,s=r.outerHeight;(i||s)&&(i=this._applyGridGutter(i,this.columnWidth),s=this._applyGridGutter(s,this.rowHeight)),n.width=Math.min(i,this.packer.width),n.height=Math.min(s,this.packer.height)},a.prototype._applyGridGutter=function(e,t){if(!t)return e+this.gutter;t+=this.gutter;var n=e%t,r=n&&1>n?"round":"ceil";return e=Math[r](e/t)*t},a.prototype._getContainerSize=function(){return this.options.isHorizontal?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},a.prototype._manageStamp=function(e){var t,n=this.getItem(e);if(n&&n.isPlacing)t=n.placeRect;else{var i=this._getElementOffset(e);t=new r({x:this.options.isOriginLeft?i.left:i.right,y:this.options.isOriginTop?i.top:i.bottom})}this._setRectSize(e,t),this.packer.placed(t),this._setMaxXY(t)},a.prototype.sortItemsByPosition=function(){var e=this.options.isHorizontal?u:o;this.items.sort(e)},a.prototype.fit=function(e,t,n){var r=this.getItem(e);r&&(this._getMeasurements(),this.stamp(r.element),r.getSize(),r.isPlacing=!0,t=void 0===t?r.rect.x:t,n=void 0===n?r.rect.y:n,r.positionPlaceRect(t,n,!0),this._bindFitEvents(r),r.moveTo(r.placeRect.x,r.placeRect.y),this.layout(),this.unstamp(r.element),this.sortItemsByPosition(),r.isPlacing=!1,r.copyPlaceRectPosition())},a.prototype._bindFitEvents=function(e){function t(){r++,2==r&&n.dispatchEvent("fitComplete",null,[e])}var n=this,r=0;e.on("layout",function(){return t(),!0}),this.on("layoutComplete",function(){return t(),!0})},a.prototype.resize=function(){var e=t(this.element),n=this.size&&e,r=this.options.isHorizontal?"innerHeight":"innerWidth";n&&e[r]==this.size[r]||this.layout()},a.prototype.itemDragStart=function(e){this.stamp(e);var t=this.getItem(e);t&&t.dragStart()},a.prototype.itemDragMove=function(e,t,n){function r(){s.layout(),delete s.dragTimeout}var i=this.getItem(e);i&&i.dragMove(t,n);var s=this;this.clearDragTimeout(),this.dragTimeout=setTimeout(r,40)},a.prototype.clearDragTimeout=function(){this.dragTimeout&&clearTimeout(this.dragTimeout)},a.prototype.itemDragEnd=function(t){var n,r=this.getItem(t);if(r&&(n=r.didDrag,r.dragStop()),!r||!n&&!r.needsPositioning)return void this.unstamp(t);e.add(r.element,"is-positioning-post-drag");var i=this._getDragEndLayoutComplete(t,r);r.needsPositioning?(r.on("layout",i),r.moveTo(r.placeRect.x,r.placeRect.y)):r&&r.copyPlaceRectPosition(),this.clearDragTimeout(),this.on("layoutComplete",i),this.layout()},a.prototype._getDragEndLayoutComplete=function(t,n){var r=n&&n.needsPositioning,i=0,s=r?2:1,o=this;return function(){return i++,i!=s?!0:(n&&(e.remove(n.element,"is-positioning-post-drag"),n.isPlacing=!1,n.copyPlaceRectPosition()),o.unstamp(t),o.sortItemsByPosition(),r&&o.dispatchEvent("dragItemPositioned",null,[n]),!0)}},a.prototype.bindDraggabillyEvents=function(e){e.on("dragStart",this.handleDraggabilly.dragStart),e.on("dragMove",this.handleDraggabilly.dragMove),e.on("dragEnd",this.handleDraggabilly.dragEnd)},a.prototype.bindUIDraggableEvents=function(e){e.on("dragstart",this.handleUIDraggable.start).on("drag",this.handleUIDraggable.drag).on("dragstop",this.handleUIDraggable.stop)},a.Rect=r,a.Packer=i,a}),define("app/component/draggable.component",["jquery","underscore","postal","vendor/packery/draggabilly.pkgd.min","vendor/packery/packery.pkgd.min"],function(e,t,n,r,i){"use strict";function s(t){this.$el=e(t)}return s.prototype={$el:null,packery:null,packeryTrack:!1,options:null,init:function(r){this.options=r=t.defaults(r,{itemSelector:".item",size:".grid-sizer",gutter:10,handle:".widget-title",percentPosition:!0}),this.packery=new i(this.$el[0],{itemSelector:r.itemSelector,columnWidth:r.size,rowHeight:r.size,gutter:r.gutter,percentPosition:r.percentPosition});var s=this;this.packery.on("dragItemPositioned",function(t){s.packeryTrack||(s.packeryTrack=!0,setTimeout(function(){s.packeryTrack=!1,n.channel("tracking").publish("fireTrackingCode",{el:e(t),val:43,dyn:{}})},500))}),this.$el.find(r.itemSelector).each(function(){s._initDrag(this)}),this.setLayout()},itemRendered:function(t){e(t).trigger("gh-view-rendered")},setLayout:function(){this.packery.layout()},reloadItems:function(){this.packery.reloadItems()},addItem:function(t,n){n?this.packery.prepended(t):this.packery.appended(t),this._initDrag(e(t)[0]),this.reloadItems(),this.setLayout()},_initDrag:function(t){function o(){if(n){n.setHandles();return}n=new r(t,{handle:s}),n.on("dragEnd",function(t){setTimeout(function(){if(t.element){var n=e("#"+t.element.id);n.hasClass("is-positioning-post-drag")&&(n.removeClass("is-positioning-post-drag"),i.reloadItems())}},1e3)}),i.bindDraggabillyEvents(n)}var n,i=this.packery,s=this.options.handle;this.$el.on("gh-view-rendered",this.options.itemSelector,o),o()}},s}),define("app/widgets/ebschool/searchresult.model",["backbone"],function(e){"use strict";var t=e.Model.extend({defaults:{name:null,description:null,url:null,contentID:null}});return t}),define("app/widgets/ebschool/searchresult.view",["jquery","base.view","./searchresult.model","postal"],function(e,t,n,r){"use strict";var i=t.extend({tagName:"li",className:"results-row",template:"searchresult.hbs",initialize:function(e){t.prototype.initialize.apply(this,arguments),this.model=new n(e.data),this.render()},afterRender:function(){var t=e("#search-input").val();this.$el.find("a").data("track-attr-searchstring",t),r.channel("tracking").publish("bind",this.$el)}});return i}),define("app/widgets/ebschool/ebschool.widget",["jquery","underscore","postal","base.view","i18next","session","app/services/dashboard.service","base.model","./searchresult.view","app/utils/utils","app/component/spinner.component"],function(e,t,n,r,i,s,o,u,a,f){"use strict";return r.extend({template:"ebschool.hbs",maskContainer:".ebschool-widget",el:".ebschool-widget",events:{"submit form":"onSubmit","keyup input":"onKeyPress","click .search-footer .hide-results":"onHideResults","click .clear-search-button":"onClearSearch","mouseover .clear-search-button":"onInputFocusUpdate"},initialize:function(){r.prototype.initialize.apply(this,arguments),this.model=new u,this.listenTo(this.model,"change",t.bindKey(this,"render"))},onKeyPress:function(){var e=this.$("input"),t=this.$el.find(".btn");e.val()!==""?(this.$el.find(".clear-search-button").show(),t.removeAttr("disabled")):(this.$el.find(".clear-search-button").hide(),t.attr("disabled","disabled"))},findResults:function(e){var t=this;o.searchEB(e).done(function(n){n.searchString=e,t.model.set(n)}).fail(function(){t.showNoResults()}).always(function(){t.hideMask(),n.channel("cards").publish("reRender")})},onSubmit:function(t){t.preventDefault();var r=this.$el.find("#search-input").val().trim(),i=this.$el.find(".btn");/\S/.test(r)?(this.showMask(),this.$el.find(".btn").data("track-attr-searchstring",r),n.channel("tracking").publish("fireTrackingCode",{el:i,val:e(i).data("track-event"),dyn:{SearchString:r}}),this.findResults(r)):this.destroyData()},showNoResults:function(){this.$el.removeClass("ebschool-widget-full").addClass("ebschool-widget-compact").find(".search-results").show().end().find(".no-results").show(),this.$el.find(".search-area").hide()},render:function(){r.prototype.render.apply(this,arguments),this.hideMask();var e=this.model.get("activities")||[],t=this,n=this.model.get("searchString");this.$el.find("#search-input").val(n),this.$el.find(".view-all-results").data("track-attr-searchstring",n),this.$el.find(".view-all-results").data("track-attr-resultcount",e.length),n?this.$el.find(".clear-search-button").show():this.$el.find(".clear-search-button").hide();if(!this.model.get("totalResults")&&n)this.showNoResults();else if(this.model.get("totalResults")){this.$el.removeClass("ebschool-widget-compact").addClass("ebschool-widget-full").find(".search-container").addClass("scrollable").end().find(".search-results").show().end().find(".search-area").show().find(".search-footer .hide-results").show().end().find(".results-text").html(" results found"),this.$el.find(".no-results").hide();var i=this.$el.find("#search-input").val();this.$el.find(".view-all-results").attr("href",f.replaceWildcard(GH_CONSTANTS.WIDGET.EBSCHOOL.VIEW_ALL,i)),this.$el.find("#index-results").text(e.length),this.$el.find("#total-results").text(this.model.get("totalResults")),this.$el.find(".search-container").html(""),e.forEach(function(e){t.renderSearchResultItem(e)}),this.model.get("totalResults")===1?(this.$el.removeClass("ebschool-widget-full").addClass("ebschool-widget-compact").find(".search-footer .hide-results").hide().end().find(".search-container").removeClass("scrollable").end().find(".search-results").scrollTop(0).find(".results-text").html(" result found"),this.toggleFirstResult(!0)):this.addScrollbarBySelector(".search-container")}this.trigger("gridSizeChanged")},onInputFocusUpdate:function(){this.inputFocus=this.$el.find("#search-input").is(":focus")},onClearSearch:function(){var e=this.$el.find("#search-input"),t=this.$el.find(".btn");this.inputFocus?(e.val(""),e.focus(),this.$el.find(".clear-search-button").hide()):(e.val(""),this.$el.find(".clear-search-button").hide()),this.$el.find(".search-results").hide().end().removeClass("ebschool-widget-full").removeClass("ebschool-widget-compact"),this.trigger("gridSizeChanged"),t.attr("disabled","disabled")},renderSearchResultItem:function(e){var t=new a({data:e,channel:this.channel});this.$el.find(".search-container").append(t.$el)},onAdd:function(e){this.renderSearchResultItem(e)},toggleFirstResult:function(t){this.$el.find(".search-results .results-row").not(":first").each(function(){t?e(this).hide():e(this).show()})},onHideResults:function(t){t.preventDefault();var r=this.$el.find("#search-input").val(),i=this.model.get("activities").length;this.$el.toggleClass("ebschool-widget-compact").toggleClass("ebschool-widget-full").find(".search-container").addClass("scrollable").end().find(".js-expand-collapse").toggleClass("fa-compress").toggleClass("fa-expand"),this.$el.hasClass("ebschool-widget-compact")?n.channel("tracking").publish("fireTrackingCode",{el:t.currentTarget,val:e(t.currentTarget).data("track-event-expand"),dyn:{SearchString:r,ResultCount:i}}):n.channel("tracking").publish("fireTrackingCode",{el:t.currentTarget,val:e(t.currentTarget).data("track-event-collapse"),dyn:{}}),this.refreshScrollbarBySelector(".search-container"),this.trigger("gridSizeChanged")},afterRender:function(){this.$el.addClass("ebschool-widget"),n.channel("tracking").publish("bind",this.$el),this.$el.find(".btn").attr("disabled","disabled"),this.trigger("rendered")},showMask:function(){e(this.maskContainer).spinner()},hideMask:function(){e(this.maskContainer).spinner("hide")}})}),define("app/widgets/enrollmentCard/enrollment.card.model",["underscore","base.model"],function(e,t){"use strict";return t.extend({parse:function(t){if(!t.display)return t;t=e.cloneDeep(t);var n=GH_CONSTANTS.DISCIPLINE_KEYS[t.display.flavor];t["icon-style"]="icon-"+n;var r=t.back&&t.back.progress;return r&&!r.expectedProgressLabel&&!r.currentProgressLabel?(t.backProgressRowClass="rows-3",t.backListAreaRowClass="rows-12"):(t.backProgressRowClass="rows-4",t.backListAreaRowClass="rows-11"),t.display.available?t["background-style"]="color-white background-color-"+n:t["background-style"]="color-white background-color-unavailable",t.front.sash&&(t.front.sashTitleAltKey="CourseWidget.course-alt-"+t.front.sash+"-ribbon"),t.discipline="discipline-"+n,t}})}),define("app/widgets/dropdown/dropdown.widget",["jquery","underscore","base.model","container.view","postal","base.service","app/utils/utils","app/component/growl.component","app/utils/notificationEventHelper","widget.registry.service"],function(e,t,n,r,i,s,o,u,a,f){"use strict";var l=n.extend({defaults:{buttonStyle:"btn-primary",labelStyle:"hidden-xs",ulStyle:"scroll-menu",standAlone:!0,caret:!0},parse:function(e){return e?(e=t.clone(e),e.config&&(t.extend(e,t.pick(e.config,["style","buttonStyle"])),t.extend(e,t.pick(e.config,["iconRight","iconRight"]))),e.iconRight&&(e.caret=!1),e.style&&!e.buttonStyle&&(e.buttonStyle=e.style,delete e.style),e):e}}),c=r.extend({template:"dropdown.hbs",events:{"click .dropdown-item":"itemSelectionTrigger"},model:null,initialize:function(){r.prototype.initialize.apply(this,arguments),this.model=new l,this.listenTo(this.model,"change",this.render),this.subscribeChannel("window","resize",t.bindKey(this,"_handleWindowResize"))},afterRender:function(){r.prototype.afterRender.apply(this,arguments),this.$el.addClass("dropdown-widget"),this.setMaxHeight(),this.addViews()},addViews:function(){t.each(this.model.get("options"),function(e){if(e.updateUrl){var n=f.getInstance("UpdateLink","link"),r="#"+this.getSubviewDomId(e);if(!n)return;e.notifyOnEmptyResponse=!0,this.addView(r,n),this.setView(r),t.isNull(n)||(n.model.set(e),this.listenTo(n,"emptyResponse",this.handleEmptyResponse))}},this)},isDivider:function(e){return e.getAttribute("class")==="divider"},handleEmptyResponse:function(e){var t=this.getSubviewDomId(e),n=document.getElementById(t),r=this;if(n){n.remove();var i=this.$el.find(".dropdown-menu")[0];if(i){var s=i.children;s&&s.length&&r.isDivider(s[s.length-1])&&s[s.length-1].remove(),s&&s.length&&r.isDivider(s[0])&&s[0].remove();var o=null,u=Array.prototype.slice.call(s);u.forEach(function(e){o&&r.isDivider(o)&&r.isDivider(e)?e.remove():o=e})}}this.$el.find("li.option").length===0&&this._removeMe()},getSubviewDomId:function(e){return"li-"+e.id},itemSelectionTrigger:function(n){var r,s=e(n.currentTarget),u;t.each(this.model.get("options"),function(e){e.id===s.data("optionId").toString()?r=e:t.each(e.options,function(e){if(e.id===s.data("optionId").toString())return r=e,!1});if(r)return!1}),(!r||r.type!=="download"||!r.enabled)&&n.preventDefault(),r&&(u=t.find(r.notificationEvents,function(e){return e.eventType==="click"||t.isEmpty(e.eventType)}));if(u&&r.enabled){var f={};this.channel&&(f.channel=this.channel),a.handleNotificationEvent(u,n,f)}r&&r.enabled&&(this.doAnalytics(r),r.type==="ajax"?this.ajaxAction(r):r.type==="download"?o.handleDownload(n,r.url,o.getAuthTokenObject()):(r.target||"").toLowerCase()==="_blank"?window.open(o.getAuthTokenizedUrl(r.url,o.getAuthTokenObject())):(this.trigger("dropdownSelected",t.extend({},r,{$el:s,event:n})),i.channel("page").publish("filterSelected",r)))},doAnalytics:function(e){t.each(e.analyticsEvents,function(e){var n={};if(!e.type||e.type==="click")t.each(e.data,function(e){n[e.key]=e.value}),this.trackEvent(e.id,n)},this)},showMask:function(){this.$el.find(".btn-group").spinner("show",{centerSpinner:!1,spinnerSize:"one-line"})},hideMask:function(){this.$el.find(".btn-group").spinner("hide")},trackEvent:function(t,n){i.channel("tracking").publish("fireTrackingCode",{el:e("<div/>"),val:t,dyn:n})},ajaxAction:function(e){var t=this;if(!e.config||!e.config.method)return s.doGET(e.url).always(function(t){t.message&&u.showSuccessMessage({id:e.id,message:"",title:t.message})});switch(e.config.method){case"DELETE":return s.doDELETE(e.url).always(function(n){u.showSuccessMessage({id:e.id,message:"",title:n.message}),t.publish("delete")})}},setMaxHeight:function(){var t=this.model.get("config");if(t&&t.maxHeightSubtractor){var n=this.$el.find("ul.dropdown-menu"),r=e(window).height()-t.maxHeightSubtractor;n.height()>r&&n.css({maxHeight:r,overflowY:"scroll"})}},_handleWindowResize:function(){this.setMaxHeight()}});return c}),define("app/widgets/enrollmentCard/actionArea/action.area.widget",["jquery","underscore","backbone","app/widgets/link/link.widget","app/widgets/link/link.model","postal"],function(e,t,n,r,i){"use strict";var s=i.extend({parse:function(e){if(!e.display)return e;!e.url&&!e.view&&(e.disabled="disabled");var t=GH_CONSTANTS.DISCIPLINE_KEYS[e.display.flavor];return e.display.available?(e["foreground-style"]="foreground-available",e["background-style"]="background-color-"+t,e["circle-container-style"]="",e["icon-style"]="color-"+t+" icon-"+t):(e["foreground-style"]="foreground-unavailable",e["background-style"]="background-color-unavailable",e["circle-container-style"]="circle-background-unavailable",e["icon-style"]="color-unavailable icon-"+t),e["background-image"]="image-"+t,i.prototype.parse.call(this,e)}}),o=r.extend({template:"action.area.hbs",initialize:function(){r.prototype.initialize.apply(this,arguments),this.model=new s,this.listenTo(this.model,"change",this.render)},beforeRender:function(){}});return o}),define("app/widgets/enrollmentCard/priorityFrontArea/priority.front.area.widget",["underscore","backbone","base.view","base.model"],function(e,t,n,r){"use strict";var i=n.extend({template:"priority.front.area.hbs",initialize:function(){n.prototype.initialize.apply(this,arguments),this.model=new r,this.listenTo(this.model,"change",this.render),this.listenTo(this,"fetchingComplete",this.checkForEmptyEl)},checkForEmptyEl:function(){this.$el.find(".priority-info").children().length===0&&(this.$el.remove(),this.trigger("empty"))}});return i}),define("app/widgets/simpleList/simple.list.widget",["underscore","container.view","base.model","postal","app/widgets/link/link.widget","slimScroll"],function(e,t,n,r,i){"use strict";var s=n.extend({defaults:{scrollColor:"#DDDDDD",scrollHeight:"164px",scrollAlwaysVisible:!1},parse:function(t){return t.data&&!t.list?(t.list=[],e.each(t.data,function(e){t.list.push({label:e.links[0],columnClass:"single"})},this)):e.each(t.list,function(e){if(!e.label||!e.value)e.columnClass="single"}),t.listLink&&(t.listLink.target="_self",t.listLink.style="pull-right",t.listLink.iconStyle="pull-right"),t}}),o=t.extend({template:"simple.list.hbs",initialize:function(){t.prototype.initialize.apply(this,arguments),this.model=new s,this.listLink=new i,this.addView(".simplelist-link-container",this.listLink),this.listenTo(this.model,"change",this.render)},render:t.prototype.renderNoRegions,afterRender:function(){var t,n,r,s,o,u,a;e.each(this.model.get("list"),function(a,f){t=new i,n=new i,r=this.$el.find(".simplelist-item-"+f+" .simplelist-label"),s=this.$el.find(".simplelist-item-"+f+" .simplelist-value"),t.setElement(r),n.setElement(s),o={displayName:a.label},u={displayName:a.value},e.isObject(a.label)&&(o=a.label),e.isObject(a.value)&&(u=a.value),o.textStyle="ellipsis",t.model.set(o),n.model.set(u)},this),a=this.model.get("scrollHeight"),(a==="auto"||this.$el.height()>parseInt(a,10))&&this.$el.find(".list-container ul").slimScroll({color:this.model.get("scrollColor"),height:this.model.get("scrollHeight"),alwaysVisible:this.model.get("scrollAlwaysVisible"),width:"100%"}),this.model.get("listLink")&&(this.setView(".simplelist-link-container"),this.listLink.model.set(this.model.get("listLink")))},showSpinner:function(){this.$el.spinner("show")}});return o}),define("app/widgets/enrollmentCard/threeColumn/three.column.widget",["underscore","backbone","base.view"],function(e,t,n){"use strict";var r={1:["center"],2:["left","right"],3:["left","center","right"]},i=n.extend({template:"three.column.hbs",initialize:function(){n.prototype.initialize.apply(this,arguments),this.collection=new t.Collection,this.listenTo(this.collection,"reset",this.render)},beforeRender:function(){var t=12/this.collection.length;e.each(this.collection.models,function(e,n){var i="";n===0&&(i="first-cell"),n===this.collection.length-1&&(i+=" last-cell"),e.set("cell-style",i),e.set("column-size",t),this.collection.length>3?e.set("alignment","center"):e.set("alignment",r[this.collection.length][n]),e.get("label")&&!e.get("value")&&e.set("label-style","alone")},this)}});return i}),define("app/widgets/progressBar/progress.bar.model",["underscore","base.model","session"],function(e,t,n){"use strict";var r=t.extend({defaults:{currentProgress:"0",expectedProgress:null,showTic:!0,style:null,showFull:!1,nextGenClassCard:!1},parse:function(t){if(e.isNull(t))return t;var r=t.currentProgress||0,i=t.expectedProgress||0,s=!1;return t=e.cloneDeep(t),t.showTic=!0,t.expectedProgress||(t.showTic=!1),t.labelStyles="",t.expectedProgressLabel&&(s=!0,t.labelStyles+=" label-expected",t.expectedProgress||(t.expectedProgress="0"),i<10&&(t["expected-progress-label-style"]="fixed-left")),t.currentProgressLabel&&(s=!0,t.labelStyles+=" label-current",r<10?t["current-progress-label-style"]="fixed-left":r>94&&(t["current-progress-label-style"]="fixed-right")),n.isNextgen()?t.nextGen=!0:t.showFull=t.showFull||s,t.style=t.style||"",(s||t.showFull)&&t.style.indexOf("size-full")<0&&(t.style+=" size-full"),t}});return r}),define("app/widgets/progressBar/progress.bar.widget",["underscore","backbone","base.view","app/widgets/progressBar/progress.bar.model"],function(e,t,n,r){"use strict";var i=n.extend({template:"progress.bar.hbs",id:null,model:null,tooltipTarget:".progress-bar-outer-container",initialize:function(){n.prototype.initialize.apply(this,arguments),this.model=new r,this.listenTo(this.model,"change",this.render)},afterRender:function(){var e=this;if(this.model.get("showTic")===!0){var t=this.model.get("expectedProgress");e.$el.find(".progress-bar-container .progress-bar-expected").css("width",t+"%")}var n=this.model.get("currentProgress");setTimeout(function(){e.$el.find(".progress-bar-container .progress-bar").css("width",n+"%")},1e3)}});return i}),define("app/widgets/enrollmentCard/enrollment.card",["jquery","backbone","underscore","templateregistry","container.view","app/widgets/enrollmentCard/enrollment.card.model","app/widgets/dropdown/dropdown.widget","app/widgets/enrollmentCard/actionArea/action.area.widget","app/widgets/enrollmentCard/priorityFrontArea/priority.front.area.widget","app/widgets/simpleList/simple.list.widget","app/widgets/enrollmentCard/threeColumn/three.column.widget","app/widgets/progressBar/progress.bar.widget","app/utils/utils","postal","handlebars","base.service"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){"use strict";function m(e){var t={};return e&&e.updateUrl&&(t.updateUrl=null,t.updateLaterUrl=e.updateUrl),t}return i.extend({template:"enrollment.card.hbs",progressBar:null,progressLarge:null,listArea:null,priorityBack:null,toolMenu:null,circle:null,events:{"click .flip-card":"onFlip"},initialize:function(){i.prototype.initialize.apply(this,arguments),this.model=new s,this.progressBar=new c({channel:this.channel}),this.progressLarge=new c({channel:this.channel}),this.listArea=new f({channel:this.channel}),this.priorityFrontAreaWidget=new a({channel:this.channel}),this.listenTo(this.priorityFrontAreaWidget,"empty",this.updateHeight),this.priorityBack=new l({channel:this.channel}),this.toolMenu=new o({channel:this.channel}),this.listenTo(this.toolMenu,"dropdownSelected",n.bind(this.handleToolMenuSelected,this)),this.circle=new u({channel:this.channel}),this.registerPartials(),this.listenTo(this.model,"change",this.render)},registerPartials:function(){d.registerPartial("enrollmentCardPriorityInfo",r["enrollment.priority.info.partial.hbs"])},updateWidgets:function(t){if(!t.front)return;if(t.front.priorityArea&&t.front.priorityArea.updateUrl){var r=this;e.when(v.doGET(t.front.priorityArea.updateUrl)).done(function(e){e&&e.priorityArea&&(r.priorityFrontAreaWidget.model.set(e.priorityArea),r.priorityFrontAreaWidget.$el.show()),e&&e.progressBar&&(r.progressBar.model.set(e.progressBar),r.progressBar.$el.show())})}var i=[{region:".progressbar",view:this.progressBar,parser:this.parseProgressData},{region:".tool-menu",view:this.toolMenu,parser:this.parseToolMenuData},{region:".card-circle",view:this.circle,parser:this.parseCircleData},{region:".front-priority-area",view:this.priorityFrontAreaWidget,parser:this.parsePriorityFrontAreaData},{region:".progressbar-large",view:this.progressLarge,parser:this.parseProgressBackData},{region:".list-area",view:this.listArea,parser:this.parseListAreaData},{region:".back .priority-info",view:this.priorityBack,parser:this.parsePriorityBackData}];n.each(i,function(e){this.updateWidgetData(e.region,e.view,n.extend(e.parser(t),{flippedOnce:t.flippedOnce}))},this)},parseProgressData:function(e){return n.extend({},e.front.progress,{expectedProgressLabel:null,currentProgressLabel:null})},parseProgressBackData:function(e){return e.back&&e.back.progress?(e.back.progress.showFull=!0,e.back.progress):null},parseToolMenuData:function(e){return n.extend({buttonStyle:"",labelStyle:"hidden-xs",ulStyle:"pull-right",standAlone:!0,caret:!1},e.front.toolsMenu,{displayName:null})},parseCircleData:function(e){return n.extend({cardTitle:e.displayName,display:e.display},e.front.callToAction,{})},parsePriorityFrontAreaData:function(e){return e.front.priorityArea?e.front.priorityArea:null},parseListAreaData:function(e){return e.back?n.extend({scrollHeight:"auto",scrollColor:"auto"},e.back.listArea,m(e.back.listArea)):null},parsePriorityBackData:function(e){return e.back&&n.extend(e.back.priorityArea,m(e.back.priorityArea))},updateWidgetData:function(e,t,n){this.regions[e]||this.addView(e,t),this.setView(e),t.model?(n&&n.flippedOnce&&n.updateLaterUrl&&(n.updateUrl=n.updateLaterUrl,n.updateLaterUrl=null),t.model.set(n)):t.collection&&t.collection.reset(n)},render:function(){i.prototype.renderNoRegions.apply(this,arguments),this.$el.closest("body").length&&(this.$el.addClass("enrollment-card"),this.updateWidgets(this.model.toJSON()),this.assignHeight(this,this.determineHeight))},afterRender:function(){this.$el.find(".flip-card,.enrollment-card-email-link").each(function(){p.channel("tracking").publish("bindOneEl",this)}),this.trigger("rendered");var e=this.$el.find(".progressbar-large").length,t=this.$el.find(".list-area").length,n=this.model.get("front").priorityArea;if(t&&!e&&!n){var r=this.$el.find(".list-area").parent();r.removeClass("rows-11").addClass("rows-7")}this.assignHeight(this,this.determineHeight)},onFlip:function(){this.model.set({flippedOnce:!0}),this.$el.find(".enrollment-card-container").toggleClass("flip")},handleToolMenuSelected:function(e){switch(e.type){case"link":window.location.href=e.url;break;case"download":h.handleDownload(e.event,e.url,h.getAuthTokenObject())}},updateHeight:function(){this.assignHeight(this,this.determineHeight)},assignHeight:function(e,t){if(!e.$el)return;e.$el.removeClass("sized");for(var n=1;n<7;n++)e.$el.removeClass("ec-"+n);var r,i,s=t(e);for(n=1;n<7;n++){i=144*n-10,r=i-s;if(r>-5)return e.$el.addClass("sized"),e.$el.addClass("ec-"+n)}},determineHeight:function(t){var n=0,r=t.$el.find(".enrollment-card-container").children();return r.each(function(){e(this).height()>n&&(n=e(this).height())}),n}})}),define("app/widgets/enrollmentCard/nextgenEnrollmentCard/cardImageLink/card.image.link.widget",["underscore","jquery","app/widgets/link/link.model","app/widgets/link/link.widget","templateregistry","handlebars"],function(e,t,n,r,i,s){"use strict";var o=n.extend({parse:function(e){e.noButton=!1,e.clickable=!1,e.disabled="";if(e.url||e.view)e.clickable=!0;return!e.url&&!e.view&&(e.noButton=!0,e.disabled="disabled"),n.prototype.parse.apply(this,arguments),e}}),u=r.extend({template:"card.image.link.widget.hbs",initialize:function(){r.prototype.initialize.apply(this,arguments),this.model=new o,this.listenTo(this.model,"change",this.render)},registerPartials:function(){s.registerPartial("cardLinkInner",i["card.link.inner.partial.hbs"])},beforeRender:function(){r.prototype.beforeRender.apply(this,arguments)},linkClicked:function(e){var t=this._data;t.disabled==="disabled"?e.preventDefault():r.prototype.linkClicked.apply(this,arguments)}});return u}),define("app/widgets/enrollmentCard/nextgenEnrollmentCard/priorityArea/priority.area.widget",["underscore","jquery","base.view","base.model"],function(e,t,n,r){"use strict";return n.extend({template:"priority.area.widget.hbs",spinner:!1,initialize:function(){n.prototype.initialize.apply(this,arguments),this.model=new r,this.listenTo(this.model,"change",this.render)},showSpinner:function(){this.spinner&&n.prototype.showSpinner.apply(this,arguments)}})}),define("app/widgets/enrollmentCard/nextgenEnrollmentCard/nextgen.enrollment.card",["jquery","underscore","backbone","container.view","../enrollment.card","../enrollment.card.model","app/widgets/link/link.widget","../nextgenEnrollmentCard/cardImageLink/card.image.link.widget","app/widgets/componentGroup/component.group.widget","../nextgenEnrollmentCard/priorityArea/priority.area.widget","app/widgets/progressBar/progress.bar.widget","base.service"],function(e,t,n,r,i,s,o,u,a,f,l,c){"use strict";var h=s.extend({parse:function(e){if(!e.display)return e;var t=this.getDisciplineClass(e.display.flavor);return e.display.available?(e["foreground-style"]="foreground-available",e["background-style"]="background-color-"+t,e["circle-container-style"]="",e["icon-style"]="color-"+t+" icon-"+t):(e["foreground-style"]="foreground-unavailable",e["background-style"]="background-color-unavailable",e["circle-container-style"]="circle-background-unavailable",e["icon-style"]="color-unavailable icon-"+t),e.display["card-class"]=t,s.prototype.parse.call(this,e)},getDisciplineClass:function(e){var n,r={sub_art_class:"art generic",sub_artcomm_class:"artcomm generic",sub_business_class:"business generic",sub_cte_class:"cte generic",sub_generic_class:"electives generic",sub_history_class:"history generic",sub_human_class:"human generic",sub_infotech_class:"infotech generic",sub_languagearts_class:"languagearts generic",sub_math_class:"math generic",sub_music_class:"music generic",sub_noncourse_class:"noncourse generic",sub_orientation_class:"orientation generic",sub_science_class:"science generic",sub_worldlanguages_class:"worldlanguages generic"};return t.each(r,function(t,r){e.indexOf(r)!==-1&&(n=t)},this),n}}),p=i.extend({template:"nextgen.enrollment.card.hbs",cardImageLink:null,classTitleLink:null,componentGroup:null,initialize:function(){r.prototype.initialize.apply(this,arguments),this.model=new h,this.cardImageLink=new u({channel:this.channel}),this.classTitleLink=new o({channel:this.channel}),this.links=new a({channel:this.channel}),this.priorityArea=new f({channel:this.channel}),this.progressBar=new l({channel:this.channel,type:"nextgenClassCardProgress"}),this.listenTo(this.model,"change",this.render)},updateWidgets:function(n){var r=this;if(!n.front)return;n.front.priorityArea&&n.front.priorityArea.updateUrl&&e.when(c.doGET(n.front.priorityArea.updateUrl)).done(function(e){e&&e.priorityArea&&(r.priorityArea.model.set(e.priorityArea),r.priorityArea.$el.show()),e&&e.progressBar&&(r.progressBar.model.set(e.progressBar),r.progressBar.$el.show())});var i=[{region:".card-image-link-widget",view:this.cardImageLink,parser:this.parseCardLinkData},{region:".links",view:this.links,parser:this.parseLinksIntoComponentGroup},{region:".priority-area-container",view:this.priorityArea,parser:this.returnEmptyParse},{region:".progress-bar-widget",view:this.progressBar,parser:this.returnEmptyParse}];t.each(i,function(e){this.updateWidgetData(e.region,e.view,e.parser(n))},this)},returnEmptyParse:function(){return{}},parseCardLinkData:function(e){var n=t.extend({display:e.display},e.front.callToAction,{});return n},parseLinkData:function(e){var t=e.front.callToAction||{};return t.displayName=e.displayName,t},parseLinksIntoComponentGroup:function(e){if(e&&e.components){var t=e.components;return t[0].style="title-link-widget course-title",{components:t}}return{}}});return p}),define("app/widgets/flexiblecard/flexible.card",["jquery","underscore","backbone","base.view","app/utils/utils","postal"],function(e,t,n,r,i,s){"use strict";var o=r.extend({template:"flexible.card.hbs",maskContainer:".flexible-card",events:{"click .flexible-card-link":"onLinkClickHandler"},initialize:function(){r.prototype.initialize.apply(this,arguments),this.model=new n.Model,this.listenTo(this.model,"change",t.bindKey(this,"render"))},onLinkClickHandler:function(n){var r=e(n.currentTarget),s="",o=this.model.get("links");t.each(o,function(e){var t=parseInt(e.id,10);if(t===r.data("linkId")){e.type==="download"?i.handleDownload(n,e.url,i.getAuthTokenObject()):(s=i.getAuthTokenizedUrl(e.url,i.getAuthTokenObject()),r.attr("href",s));return}})},renderHelp:function(){},afterRender:function(){this.$el.addClass("flexible-card"),s.channel("tracking").publish("bind",this.$el)}});return o}),define("app/widgets/resourceCard/resource.card.widget",["backbone","base.view","postal"],function(e,t,n){"use strict";var r=t.extend({template:"resource.card.hbs",id:null,initialize:function(){t.prototype.initialize.apply(this,arguments),this.model=new e.Model,this.listenTo(this.model,"change",this.render)},afterRender:function(){n.channel("tracking").publish("bind",this.$el)}});return r}),define("app/pages/cards/cards.page",["jquery","underscore","i18next","postal","session","page.view","base.service","base.model","app/services/dashboard.service","app/component/draggable.component","app/widgets/ebschool/ebschool.widget","app/widgets/enrollmentCard/enrollment.card","app/widgets/enrollmentCard/nextgenEnrollmentCard/nextgen.enrollment.card","app/widgets/flexiblecard/flexible.card","app/widgets/resourceCard/resource.card.widget","app/widgets/pageTitle/page.title.widget","app/component/growl.component"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){"use strict";var m=s.extend({viewId:"cards-page",template:"cards.hbs",easyInitialize:!0,ModelClass:u,loaded:!1,serviceUrlCalled:!1,gettingCards:!1,draggableComponent:null,ebSchoolWidget:null,cards:null,rendered:!1,$spinnerContainer:e(".spinner-container-maingrid"),hasRenderedNoContentMessage:!1,emptyMessage:null,emptyMessageClass:null,emptyMessageTimeout:null,groups:[],groupsLoaded:0,groupCount:0,cardComponentIds:[],subviewDefs:{"#page-title-widget-container":{dataKey:"pageTitleWidget",view:v,parser:"_pageTitleParser"}},events:{"click .help-icon":"onInfoIconClick","click .close-help-button":"onGuidedHelpClose"},initialize:function(){s.prototype.initialize.apply(this,arguments),this.ebSchoolWidget=new l({channel:r.channel("widgets")}),this.subscribeChannel("application","help",t.bindKey(this,"showGuidedHelp")),this.subscribeChannel("cards","reRender",t.bindKey(this,"reRenderDraggableComponent"))},beforeRender:function(){this.resetCardsPage(),s.prototype.beforeRender.apply(this,arguments),this.$el.parents(".content").off("click")},afterRender:function(){this.draggableComponent=new f(this.$el.find(".cards-container"));var e={itemSelector:".item",size:".grid-sizer",gutter:10,handle:".drag-area"};i.isNextgen()&&(e={itemSelector:".item",size:".grid-sizer",gutter:30,handle:".card"}),this.draggableComponent.init(e),i.isFueled()&&(this._hasCards()?t.each(this.cards,this.renderCard,this):this._renderNoContentMessage()),this.rendered=!0,i.isNextgen()&&this.updateWidgets()},updateWidgets:function(e){this.afterRenderSubviews(e)},fetchData:function(){if(this.loaded&&!i.isNextgen())return!0;this.loaded=!0,this.cards=[],i.isNextgen()?this.showSpinner():this.$spinnerContainer.spinner("show",{offsetY:75}),this.serviceUrlCalled||this.getCards()},testForAllGroupsLoaded:function(){var e=this,t=!1;return this.groupCount<=this.groupsLoaded&&(i.isNextgen()?this.hideSpinner():this.$spinnerContainer.spinner("hide",{offsetY:75}),t=!0,this._renderNoContentMessage()),this.reRenderDraggableComponent(),setTimeout(function(){e.reRenderDraggableComponent()},2e3),t},_hasCards:function(){return this.cards.length===0?!1:!0},getCards:function(){if(!this.gettingCards&&!this.serviceUrlCalled){var e=this;this.gettingCards=!0,this.serviceUrlCalled=!0,o.doGET(this.serviceUrl,{}).done(function(n){var r=n.components,i=[];r&&(e.groupCount=r.length,t.result(t.find(r,function(e){i.push(e.id)})),e.groups=i,t.each(r,function(t){e._getCardGroup(t)})),e.model.set(n,{silent:!0})}).always(function(){e.testForAllGroupsLoaded(),e.gettingCards=!1})}},_getCardGroup:function(t){var n=this;if(!this.loadEnabled(t))window.setTimeout(function(){n._getCardGroup(t)},n.loadEnabledCheckInterval);else{var r=t.updateUrl;e.inArray(r,this.cardComponentIds)===-1&&(this.cardComponentIds.push(r),debug.log("pushing "+r)),o.doGET(r,{}).done(function(i){i.hasAccess?n.addCard({view:n.ebSchoolWidget,data:{changeit:Math.random()},group:"eb"}):e.inArray(r,n.cardComponentIds)!==-1&&(debug.log("pulling "+r),debug.log(n.cardComponentIds),n.cardComponentIds.splice(e.inArray(r,n.cardComponentIds),1),debug.log(n.cardComponentIds),n.attachEnrollmentWidgets(i,t.id))}).fail(function(){}).always(function(){n.groupsLoaded++,n.testForAllGroupsLoaded()})}},attachEnrollmentWidgets:function(e,n){var s=i.isNextgen();t.each(e.cards,function(e){var t;switch(e.type){case"ResourceCard":t=new d;break;case"FlexibleCard":t=new p({channel:r.channel("widgets")});break;case"ConfigurableCard":s?t=new h({channel:r.channel("widgets")}):t=new c({channel:r.channel("widgets")})}t&&this.addCard({view:t,data:e,group:n})},this)},addCard:function(e){this.cards.push(e),this.rendered&&this.renderCard(e)},hasGroupAfter:function(t){var n=e.inArray(t,this.groups);return this.groups[n+1]?!0:!1},hasGroupBefore:function(t){var n=e.inArray(t,this.groups);return n>0?!0:!1},getFirstElOfGroupAfter:function(t){var n=this.groups[e.inArray(t,this.groups)+1],r=e("."+n+":first");return r.length?r:!1},getLastElOfGroupBefore:function(t){var n=this.groups[e.inArray(t,this.groups)-1],r=e("."+n+":last");return r.length?r:!1},renderCard:function(t){var n=this.$el.find(".cards-container"),r=e('<div id="'+t.view.cid+'"></div>').addClass("item").addClass(t.group),i=null,s=!1,o=e("."+t.group+":last");this.hasGroupBefore(t.group)?e("."+t.group).length>0?r.insertAfter(o):this.hasGroupAfter(t.group)&&this.getFirstElOfGroupAfter(t.group)?(i=this.getFirstElOfGroupAfter(t.group),r.insertBefore(i)):this.hasGroupBefore(t.group)&&this.getLastElOfGroupBefore(t.group)?(i=this.getLastElOfGroupBefore(t.group),r.insertAfter(i)):r.appendTo(n):o.length>0?r.insertAfter(o):(r.prependTo(n),s=!0);var u="#"+t.view.cid;this.regions[u]!==t.view&&this.addView(u,t.view),this.setView(u),t.view.destroyData(),t.view.model.set(t.data),this.stopListening(t.view,"rendered"),this.listenTo(t.view,"rendered",function(){this.draggableComponent.itemRendered(r)}),this.listenTo(t.view,"gridSizeChanged",function(){this.reRenderDraggableComponent()}),this.draggableComponent.addItem(t.view.$el,s)},reRenderDraggableComponent:function(){this.draggableComponent.setLayout()},showGuidedHelp:function(){var e=this.$el.find(".card-guided-help");if(e.length===0)return;this.$el.find(".tool-menu").hide(),e.show(),this.$el.find(".guided-help-overlay").first().show().find(".help-text-wrapper").perfectScrollbar(),this.$el.parents(".content").on("click",t.bind(this.onOutsideHelpClick,this))},hideGuidedHelp:function(){this.$el.find(".tool-menu").show(),e(".card-guided-help, .guided-help-overlay").hide(),r.channel("tracking").publish("fireTrackingCode",{el:e("<div></div>"),val:31,dyn:{}})},onGuidedHelpClose:function(t){t.preventDefault(),e(t.target).closest(".guided-help-overlay").hide(),e(".guided-help-overlay:visible").length===0?this.hideGuidedHelp():r.channel("tracking").publish("fireTrackingCode",{el:e(t.currentTarget),val:35,dyn:{}})},onInfoIconClick:function(t){return t.stopPropagation(),e(t.target).closest(".card-guided-help").siblings(".guided-help-overlay").show().find(".help-text-wrapper").perfectScrollbar(),r.channel("tracking").publish("fireTrackingCode",{el:e(t.currentTarget),val:34,dyn:{}}),!1},onOutsideHelpClick:function(t){!e(t.target).hasClass("help-icon")&&!e(t.target).closest(".guided-help-overlay").length&&(this.hideGuidedHelp(),this.$el.parents(".content").off("click"))},_renderNoContentMessage:function(){var t=this.$el,n=!this._hasCards();this.model.get("emptyMessage")&&(this.emptyMessage=this.model.get("emptyMessage"),this.emptyMessageClass=this.model.get("emptyMessageClass"));if(this.emptyMessage&&n&&!this.hasRenderedNoContentMessage&&!this.emptyMessageTimeout){var r=this;this.emptyMessageTimeout=window.setTimeout(function(){r.hasRenderedNoContentMessage=!0;var n=e('<div class="'+r.emptyMessageClass+' empty-message"><div><span>'+r.emptyMessage+"</span></div></div>");t.append(n),t.addClass("is-empty"),debug.log("Cards page ("+this.cid+") - renderNoContentMessage(): "+r.emptyMessage)},500)}},resetCardsPage:function(){i.isNextgen()&&(this.groups=[],this.groupsLoaded=0,this.groupCount=0,this.cardComponentIds=[],this.serviceUrlCalled=!1,clearTimeout(this.emptyMessageTimeout)),this.hasRenderedNoContentMessage=!1}});return m}),define("app/component/animate.component",["jquery","underscore"],function(e,t){"use strict";var n={defaultAnimationType:"bounceIn",defaultDelay:1e3,animateOnAfterRender:function(){this.animateElements(e(".animate-me"))},animateElements:function(n){t.each(n,function(t){var n=e(t);this.animateElement(n)},this)},animateElement:function(e){var t=e.is("[data-animation-type]")?e.attr("data-animation-type"):this.defaultAnimationType,n=e.is("[data-animation-delay]")?e.attr("data-animation-delay"):this.defaultDelay;setTimeout(function(){e.removeClass("animate-me").addClass(t+" animated").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.removeClass(t+" animated")})},n)},animateProgressBar:function(){e.each(e("div.progress-bar"),function(){var t=e(this);if(t.is("[aria-valuetransitiongoal]")){var n=t.attr("aria-valuetransitiongoal"),r=t.attr("data-animation-delay")?t.attr("data-animation-delay"):this.defaultDelay;setTimeout(function(){t.css("width",n+"%")},r)}})}};return n}),define("app/layout/postAuthLayout",["modernizr","backbone","app/layout/layout.view","container.view","jquery","underscore","enquire","postal","session","app/utils/utils","app/pages/cards/cards.page","app/component/animate.component"],function(e,t,n,r,i,s,o,u,a,f,l,c){"use strict";var h=n.extend({events:{"click .navigate":"navigateClick","click .gh-navbar-toggle":"sidebarNavToggle","click #hamburger":"sidebarNavToggle","click #overlay-tint":"sidebarNavToggle","click .js-external-link":"updateHrefBeforeOpeningExternalUrl","click #skip-navigation":"skipNavigation"},responsiveMediaQuery:"all and (max-width: 769px)",drawerMediaQuery:"all and (min-width:751px) and (max-width:1023px)",initialize:function(){this.constructor.__super__.initialize.apply(this,arguments),this.model=a,i("body").removeClass("login-body"),a.isFueled()&&i("body").addClass("gh-fixed-navbar")},skipNavigation:function(e){e.preventDefault(),i("#page-title-widget-container h1:first").focus()},sidebarNavToggle:function(e){e.preventDefault(),this.toggleDomForResponsiveMenu()},toggleDomForResponsiveMenu:function(e){var t=i("#content-area"),n=i("body"),r=i("#sidebar-wrapper"),s=i("#dashboard"),o=i(".gh-navbar-top"),u=i("#overlay-tint");e==="hide"?(r.removeClass("visible"),s.removeClass("responsive-menu-visible"),o.removeClass("responsive-menu-visible"),t.removeClass("disable-scrolling")):(r.toggleClass("visible"),s.toggleClass("responsive-menu-visible"),o.toggleClass("responsive-menu-visible"),t.toggleClass("disable-scrolling")),a.isNextgen()&&(t.hasClass("disable-scrolling")?(u.fadeIn(),n.bind("touchmove",function(e){e.preventDefault()}),t.bind("touchmove",function(e){e.preventDefault()})):(u.fadeOut(),n.unbind("touchmove"),t.unbind("touchmove")))},navigateClick:function(e){var t=i(e.currentTarget),n=!0;if(s.isEmpty(t.data("url"))||s.isEmpty(t.data("navigate"))||!t.data("urlnav"))e.preventDefault(),n=!1;var r=t.data("navigate"),o=t.data("options");debug.log("navigating to "+r),this.toggleDomForResponsiveMenu("hide");switch(r){case"logout":this.removeDragListeners(),u.channel("application").publish("navigate","logout");break;case"guided-help":this.regions[".active-dash-module"].template!==l.prototype.template&&u.channel("application").publish("navigate","dashboard"),u.channel("application").publish("help");break;default:u.channel("application").publish("navigate",{route:r,args:o,urlnav:n})}},hideLeftNav:function(){i("#dashboard").addClass("menu-hidden"),i("#sidebar-wrapper").addClass("menu-hidden"),this.setSidenavTabbable(!1)},render:r.prototype.renderNoRegions,beforeRender:function(){},setSidenavTabbable:function(e){return e},afterRender:function(){n.prototype.afterRender.apply(this,arguments),a.get("theme")==="student"&&a.isFueled()&&this.hideLeftNav(),i(".app-container").addClass("app-container-dashboard"),i(".dropdown-toggle").dropdown(),u.channel("tracking").publish("bindOneEl",i(".logo-home-button")),u.channel("tracking").publish("bindOneEl",i(".navbar-toggle"));var e=this;o.register(this.responsiveMediaQuery,{unmatch:function(){e.toggleDomForResponsiveMenu("hide")}}),a.isNextgen()&&o.register("all and (min-width: 1024px)",{match:function(){i(document).on("scroll.headerListener",function(){e.stickyHeader(!0)})},unmatch:function(){i(document).off("scroll.headerListener"),e.stickyHeader(!1)}})},stickyHeader:function(e){var t=i("#header-bar");e&&i(window).scrollTop()>1?t.addClass("sticky"):t.removeClass("sticky")},removeDragListeners:function(){e.touch&&(i(document).off("touchmove"),i(window).off("scroll"),i(window).off("wheel"))},handleTransition:function(){a.isNextgen()&&i("#wallpaper").attr("style",""),this.$dashElement.html(""),this.regions[".active-dash-module"].render(),c.animateProgressBar(),i("html, body").animate({scrollTop:0},"slow")}});return h}),define("app/daemon/tokenManager.view",["jquery","underscore","base.view","base.service","backbone","postal","i18next","session","bootstrap","app/utils/utils"],function(e,t,n,r,i,s,o,u,a,f){"use strict";var l=n.extend({template:"<div></div>",idleDate:new Date,maxTime:60,notificationTime:55,tokenRenewalDate:new Date,renewTokenAtNextIdleDateCheck:!1,scheduledTokenRenewal:f.addMinutes(new Date,20),interval:undefined,modal:!1,events:{"click .do-continue":"sessionExtend"},initialize:function(){var e=this;n.prototype.initialize.apply(this,arguments),this.channel=s.channel("application"),this.setTokenRenewalDate(),this.idleDate=new Date,this.subscribe("tokenRenewed",t.bind(this.setTokenRenewalDate,this)),this.subscribe("emptyToken",t.bind(this.scheduleTokenRenewalNextIdleDateCheck,this)),this.idleInterval=setInterval(function(){u.getToken()?e.evaluateTimer():e.sessionTimeoutHandler()},6e4),this.bindDomInteractionEvents()},setTokenRenewalDate:function(){this.tokenRenewalDate=new Date,this.scheduledTokenRenewal=f.addMinutes(this.tokenRenewalDate,20)},bindDomInteractionEvents:function(){var t=this;e(document).on("scroll.expiredsession",function(){t.idleDateReset()}),e(document).on("keypress.expiredsession",function(){t.idleDateReset()}),e(document).on("mousedown.expiredsession",function(){t.idleDateReset()})},unbindDomInteractionEvents:function(){e(document).off("keypress.expiredsession"),e(document).off("mousedown.expiredsession"),e(document).off("scroll.expiredsession")},idleDateReset:function(){u.getToken()&&(this.idleDate=new Date)},getIdleTime:function(){return(e.now()-this.idleDate)/6e4},setIdleTime:function(e){debug.warn("This method should be used only for testing!"),this.idleDate=f.addMinutes(new Date,-1*e)},evaluateTimer:function(){var t=this.getIdleTime();if(t>=this.maxTime){this.sessionTimeoutHandler();return}t>=this.notificationTime&&!this.modal&&this.renderNotification(),(this.renewTokenAtNextIdleDateCheck||this.scheduledTokenRenewal<e.now())&&this.renewToken()},renewToken:function(){var t=this;this.renewTokenAtNextIdleDateCheck=!1,u.endpoint("token")?e.when(r.doGET(u.endpoint("token"))).then(function(e){!e&&u.manageSession&&t.sessionExtendError()}):debug.log("Token endpoint is false. Skipping the token refresh.")},sessionTimeoutHandler:function(){s.channel("tracking").publish("fireTrackingCode",{el:e("<div></div>"),val:60,dyn:{}}),this.dispose(),this.channel.publish("navigate","logout")},sessionExtend:function(e){s.channel("tracking").publish("fireTrackingCode",{el:e.currentTarget,val:52,dyn:{}}),this.renewToken(),this.idleDateReset(),this.bindDomInteractionEvents()},scheduleTokenRenewalNextIdleDateCheck:function(){this.renewTokenAtNextIdleDateCheck=!0},sessionExtendError:function(){var t=this;e.growl({message:o.t("MainLayout.expired-session-error"),title:""},{type:"danger",allow_dismiss:!0,delay:3e3,pause_on_mouseover:!0,position:{from:"top",align:"center"}}),setTimeout(function(){t.sessionTimeoutHandler()},3e3)},renderNotification:function(){var t=this;this.unbindDomInteractionEvents(),s.channel("tracking").publish("fireTrackingCode",{el:e("<div></div>"),val:59,dyn:{}}),s.channel("modal").publish("show",{msg:o.t("MainLayout.expired-session-message"),footer:!0,icon:"info",scope:this,closeCallback:t.sessionExtend}),this.modal=!0},dispose:function(){debug.log("tokenManager.dispose()"),s.channel("modal").publish("hide"),n.prototype.dispose.apply(this,arguments),clearInterval(this.idleInterval),this.tokenRenewalDate=null,this.scheduledTokenRenewal=null,this.renewTokenAtNextIdleDateCheck=!1,this.modal=!1,this.unbindDomInteractionEvents()}});return l}),define("app/widgets/ebschool/licence.model",["backbone"],function(e){"use strict";var t=e.Model.extend({url:"/gh_is_gw/eb/hasAccess?role=student&userID=",defaults:{message:"",hasAccess:!1},initialize:function(e){this.url+=e}});return t}),define("app/widgets/navigation/brandNav/brand.nav.view",["jquery","postal","base.view","base.model"],function(e,t,n,r){"use strict";var i=n.extend({template:null,events:{"click a.logo-home-button":"handleClick"},initialize:function(){n.prototype.initialize.apply(this,arguments),this.model=new r,this.listenTo(this.model,"change",this.render)},afterRender:function(){this.model.get("viewer")&&e("#brand").addClass("has-viewer")},handleClick:function(){e("#sidebar-nav").find("li").removeClass("selected")}});return i}),define("app/widgets/link/nextgenDropdownLink/nextgen.dropdown.link.widget",["underscore","jquery","../link.widget"],function(e,t,n){"use strict";var r=n.extend({template:"nextgen.dropdown.link.hbs",afterRender:function(){var e=this._data();if(e.emptyResponse)this._removeMe();else{var t=this.model.getDeep("config.tag");t&&this.$el.wrapInner("<"+t+"></"+t+">")}},_removeMe:function(){this.$el.prev().remove(),this.$el.remove(),this.dispose()}});return r}),define("app/widgets/navigation/updatingNavItem.model",["underscore","jquery","base.model","base.service"],function(e,t,n,r){"use strict";var i=n.extend({idAttribute:"id",defaults:{id:null,type:"",defaultView:!1,displayName:"",icon:"",selected:!1,hasBadge:!1,badge:[],style:"",breakpoints:[],view:"",url:"",target:"",analyticsEvents:[],navItems:[]},parse:function(t){var n=this;return e.each(t.navItems,function(e,t){e.updateUrl&&(n.updateAndMerge(e.updateUrl,t),e.updateUrl=!1)}),t},updateAndMerge:function(n,i){var s=this;t.when(r.doGET(n)).done(function(t){var n=e.clone(s.attributes),r;t.navItems?r=s.insertArrayAt(n.navItems,i,t.navItems):r=n.navItems.splice(t,i),s.set(r)})},insertArrayAt:function(e,t,n){return e.splice(t,1),Array.prototype.splice.apply(e,[t,0].concat(n)),e}});return i}),define("app/widgets/navigation/topMenu/top.menu.dropdown.view",["underscore","postal","container.view","app/widgets/link/link.widget","app/widgets/link/nextgenDropdownLink/nextgen.dropdown.link.widget","app/widgets/navigation/updatingNavItem.model","app/component/animate.component","session"],function(e,t,n,r,i,s,o,u){"use strict";var a=n.extend({template:null,initialize:function(){n.prototype.initialize.apply(this,arguments),this.model=new s,this.listenTo(this.model,"change",this.render)},afterRender:function(){var n=this._data(),s=this;this.$el.find(".js-notification").parent(".dropdown").on("show.bs.dropdown",function(){s.resetIconAndBadge()});if(n.emptyResponse)this._removeMe();else{var a;this.model.get("badge")&&o.animateElements(this.$el.find(".animate-me")),t.channel("tracking").publish("bind",this.$el),u.isFueled()&&this.$el.find("a.dropdown-toggle").append('<b class="caret"></b>'),a=this._parseMenuItems(this.model.get("navItems")),e.each(a,function(e,t){var n;u.isNextgen()?n=new i:n=new r,this.addView("."+e.id+"-menu-item-"+t,n),this.setView("."+e.id+"-menu-item-"+t),n.model.set(e)},this),this.$el.find("a.dropdown-toggle i.icon").addClass("tool")}},resetIconAndBadge:function(){this.model.get("badge")&&u.isFueled()&&(this.$el.find("a.dropdown-toggle > .badge").remove(),this.$el.find("a.dropdown-toggle i").removeClass("color-"+this.model.get("badge").color+" icon-animated-bell"))},render:function(){this.$el.removeClass("open"),n.prototype.render.apply(this,arguments)},_parseMenuItems:function(t){return e.each(t,function(e){e.role="menuitem",e.style="nav-link",e.linkAttributes={tabindex:-1}},this),t}});return a}),define("app/widgets/navigation/topMenu/top.menu.view",["underscore","jquery","base.model","handlebars","container.view","templateregistry","./top.menu.dropdown.view","session"],function(e,t,n,r,i,s,o,u){"use strict";var a=i.extend({template:"top.menu.hbs",initialize:function(){i.prototype.initialize.apply(this,arguments),this.model=new n,this.registerPartials(),this.listenTo(this.model,"change",this.render)},registerPartials:function(){r.registerPartial("notificationItem",s["notification.item.partial.hbs"]),r.registerPartial("nextgenDropdown",s["nextgen.dropdown.partial.hbs"])},render:function(){i.prototype.renderNoRegions.apply(this,arguments)},afterRender:function(){var e=this._data();e.emptyResponse?this._removeMe():this.addDropdowns(this.model.get("navItems"))},addDropdowns:function(t){e.each(t,function(e){if(e.id!=="brand"){var t=this.$el.find("#top-menu"),n=e.icon,r="generic";u.isNextgen()&&(r="generic.nextgen",n&&n.indexOf("avatar")!==-1&&(r="profile.nextgen",t.append('<li class="dropdown"></li>'))),t.append('<li id="top-menu-dropdown-'+n+'" class="dropdown" role="menuitem"></li>'),u.isFueled()&&(n==="notification"||n==="profile")&&(r=n);var i=new o({template:r+".menu.hbs"});this.addView("#top-menu-dropdown-"+e.icon,i),this.showView("#top-menu-dropdown-"+e.icon),i.model.set(e)}},this)}});return a}),define("app/widgets/navigation/nextGen/tabs/sub.nav.tab.widget",["jquery","underscore","postal","container.view","base.model","widget.registry.service","session"],function(e,t,n,r,i,s,o){"use strict";var u=r.extend({template:"sub.nav.tab.widget.hbs",events:{"click a":"select"},initialize:function(){r.prototype.initialize.apply(this,arguments),this.model=new i,this.listenTo(this.model,"change",this.render)},handleEmptyResponse:function(e){var t=this.getSubviewDomId(e),n=document.getElementById(t);n&&document.getElementById(t).remove()},afterRender:function(){o.isFueled()&&n.channel("tracking").publish("bind",this.$el),this.addNavItems()},getSubviewDomId:function(e){return"subnav-"+e.id},addNavItems:function(){var e=this.model.get("components");t.each(e,function(e){var n="#"+this.getSubviewDomId(e),r=s.getInstance(e.type,"static");this.addView(n,r),this.setView(n),t.isNull(r)||(r.model.set(e),this.listenTo(r,"emptyResponse",this.handleEmptyResponse))},this)}});return u}),define("app/widgets/navigation/nextGen/header.bar.widget",["underscore","jquery","base.model","container.view","app/widgets/navigation/nextGen/tabs/sub.nav.tab.widget","app/widgets/dropdown/dropdown.widget","app/widgets/navigation/topMenu/top.menu.view","postal"],function(e,t,n,r,i,s,o,u){"use strict";var a=r.extend({template:"header.bar.widget.hbs",headerBarTitleWidget:null,headerBarTabWidget:null,initialize:function(){r.prototype.initialize.apply(this,arguments),this.model=new n,this.listenTo(this.model,"change",this.render),this.subscribeChannel("headerNavigation","update",e.bindKey(this,"updateSubviews")),this.subscribeChannel("title","update",e.bindKey(this,"updateTitle"))},render:function(){r.prototype.renderNoRegions.apply(this,arguments),this.addDomChangesForHeaderNav(!1)},afterRender:function(){this.addTopMenu(this.model.get("navItems"))},addTopMenu:function(e){var t=new o({el:"#header-toolbar",channel:u.channel("widgets")});this.addView("#header-toolbar",t),this.setView("#header-toolbar"),t.model.set(e)},updateTitle:function(e){this.headerBarTitleWidget&&this.headerBarTitleWidget.dispose(),this.headerBarTabWidget&&(this.headerBarTabWidget.dispose(),this.addDomChangesForHeaderNav(!1)),t("#header-title-h2").html("").append(e)},updateSubviews:function(e){e.headerChooser&&(this.headerBarTitleWidget=new s({channel:this.channel,el:"#header-title-h2"}),this.headerBarTitleWidget.model.set(e.headerChooser)),e.headerTabs&&(this.headerBarTabWidget=new i({channel:this.channel,el:"#subnav"}),this.headerBarTabWidget.model.set(e.headerTabs),this.addDomChangesForHeaderNav(!0))},addDomChangesForHeaderNav:function(e){e?(t("#subnav").show(),t("#subnav-separator").show(),t("#widgets-column").addClass("has-nav")):(t("#subnav").hide(),t("#subnav-separator").hide(),t("#widgets-column").removeClass("has-nav"),t("#header-title-h2").removeClass("lc-student-chooser"))}});return a}),define("app/widgets/badge/badge.widget",["underscore","jquery","base.view","base.model"],function(e,t,n,r){"use strict";var i=r.extend({defaults:{visible:!0},parse:function(e){return e.updateUrl&&(e.focusOnRender=!0),e}}),s=n.extend({template:"badge.widget.hbs",spinner:!1,initialize:function(){n.prototype.initialize.apply(this,arguments),this.model=new i,this.listenTo(this.model,"change",this.render)},afterRender:function(){this.model.get("focusOnRender")&&t(this.el).find(".badge").first().focus()},setLabelForCount:function(){var e=this.model.get("count"),t=this.model.get("badgeLabelSingular"),n=this.model.get("badgeLabelPlural"),r="";e===1?r=t:r=n,this.model.set("label",r)},incrementCount:function(e){var t=this.model.get("count");this.model.set("count",t+e),this.setLabelForCount()},decrementCount:function(e){var t=this.model.get("count");this.model.set("count",t-e),this.setLabelForCount()},setCount:function(e){this.model.set("count",e),this.setLabelForCount()},showSpinner:function(){this.spinner&&n.prototype.showSpinner.apply(this,arguments)}});return s}),define("app/widgets/navigation/sideBarMenu/sidebar.nav.item.widget",["underscore","jquery","container.view","base.model","handlebars","templateregistry","session","postal","app/widgets/badge/badge.widget"],function(e,t,n,r,i,s,o,u,a){"use strict";var f=r.extend({parse:function(e){return e.disabled="",!e.url&&!e.view&&(e.disabled="disabled"),e.config&&e.config.secondaryIcon&&(e.secondaryIcon=e.config.secondaryIcon),e}});return n.extend({template:"sidebar.nav.item.link.hbs",events:{"click a":"handleClick"},initialize:function(){n.prototype.initialize.apply(this,arguments),this.model=new f,this.listenTo(this.model,"change",this.render),this.registerPartials()},render:function(){n.prototype.renderNoRegions.apply(this,arguments),this.updateWidgets(this.model.toJSON())},updateWidgets:function(e){if(e&&e.badge){var t=new a;this.addView(".badge-container",t),this.setView(".badge-container"),t.model.set(e.badge)}},passThroughBadge:function(e){return e},registerPartials:function(){o.isNextgen()?i.registerPartial("item",s["sidebar.nextgen.nav.item.hbs"]):i.registerPartial("item",s["sidebar.nav.item.hbs"])},afterRender:function(){u.channel("application").subscribe("selectNavItem",e.bind(this.checkSelected,this));if(o.isNextgen()){var t=this._data();t.emptyResponse&&this._removeMe()}this.updateWidgets(),this.model&&this.model.get("defaultItem")&&this.selectMe()},checkSelected:function(e){var t=e.view;t==="default"&&(t="dashboard"),t===this.model.get("view")?this.selectMe():this.deselectMe()},deselectMe:function(){o.isNextgen()?this.$el.removeClass("selected"):this.$el.find("a").removeClass("selected")},selectMe:function(){o.isNextgen()?this.$el.addClass("selected"):this.$el.find("a").addClass("selected")},handleClick:function(e){if(this.model.get("disabled")==="disabled")e.preventDefault();else{this.handleAnalyticsEvents({type:"click"});if(o.isFueled()){t(e.currentTarget).find(".badge").remove();return}t(e.currentTarget).blur()}}})}),define("app/widgets/navigation/sideBarMenu/sidebar.menu.view",["jquery","underscore","postal","container.view","base.model","./sidebar.nav.item.widget","session"],function(e,t,n,r,i,s,o){"use strict";var u=r.extend({template:"sidebar.menu.hbs",events:{"click a":"removeBadge"},initialize:function(){r.prototype.initialize.apply(this,arguments),this.model=new i,this.listenTo(this.model,"change",this.render)},afterRender:function(){o.isFueled()&&n.channel("tracking").publish("bind",this.$el),this.addNavItems()},addNavItems:function(){var e=this.model.get("navItems");t.each(e,function(e){var t="#sidebar-nav-item-"+e.id,n=new s;n.model.set(e),this.addView(t,n),this.showView(t)},this)}});return u}),define("app/widgets/searchBox/searchBox.widget",["base.view","underscore","jquery","backbone","postal","templateregistry","i18next"],function(e,t,n,r,i,s){"use strict";var o=r.Model.extend({defaults:{placeHolder:null,searchButtonTitle:null,searchTrackingId:0,icon:"fa fa-search",trackingCode:null}}),u=e.extend({template:"searchBox.hbs",model:null,events:{"click .btn":"onSubmitClick","keyup input":"onKeyPress","click .clear-search-button":"clearSearch","mouseover .clear-search-button":"onInputFocusUpdate"},initialize:function(){e.prototype.initialize.apply(this,arguments),this.model=new o,this.listenTo(this.model,"change",this.render)},afterRender:function(){t.isNull(this.options.xsContainer)||n(this.options.xsContainer).append(s["searchBoxButton.hbs"]())},onKeyPress:function(e){var t=this.$el.find("input"),r=this.$el.find(".clear-search-button"),i=this.$el.find(".btn");e.which===13&&t.val()&&this.onSubmitClick(e),t.val()!==""?r.show():r.hide(),n.trim(t.val())!==""?i.removeAttr("disabled"):i.attr("disabled","disabled")},onSubmitClick:function(e){var r=this.$el.find(".search-input"),s=r.val().trim(),o=this.$el.find(".btn"),u=this.model.get("trackingCode");e.preventDefault();if(/\S/.test(s)){this.trigger("search",s),t.isNull(u)||i.channel("tracking").publish("fireTrackingCode",{el:o,val:u,dyn:{SearchString:s}});var a=n(".navbar-search.navbar-toggle").is(":visible");if(a){var f=n("#student-search");f.collapse("hide")}this.clearSearch(),r.blur()}},clearSearch:function(){var e=this.$el.find(".search-input");this.inputFocus&&e.focus(),e.val(""),this.$el.find(".clear-search-button").hide(),this.$el.find(".btn").attr("disabled","disabled")},onInputFocusUpdate:function(){this.inputFocus=this.$el.find("#search-input").is(":focus")}});return u}),define("app/widgets/firsttimehelp/firsttimehelp.view",["jquery","backbone","underscore","base.view","i18next","postal","templateregistry"],function(e,t,n,r,i,s,o){"use strict";var u=r.extend({template:"firsttimehelp.hbs",el:"body",events:{"click .first-time-help-overlay":"onFirstTimeHelpClick"},initialize:function(){r.prototype.initialize.apply(this,arguments)},onFirstTimeHelpClick:function(t){t.preventDefault(),e(".app-container").removeClass("no-scrollable"),e(".first-time-help-overlay").remove();var n=e(t.currentTarget);s.channel("tracking").publish("fireTrackingCode",{el:n,val:n.data("track-event"),dyn:{}})},render:function(){if(this.template in o){var t=o[this.template];e(this.el).append(t(this._data()))}else e(this.el).append(this.template);e(".app-container").addClass("no-scrollable")}});return u}),define("app/widgets/navigation/copyright/copyright.widget",["underscore","jquery","postal","container.view","base.model","app/widgets/link/link.widget"],function(e,t,n,r,i,s){"use strict";var o=i.extend({parse:function(e){return e}}),u=r.extend({template:"copyright.widget.hbs",events:{"click #legal-btn":"handleLegalDrawer","click #copy-close":"handleLegalDrawer"},afterRender:function(){this.addNavItems();var t=this.model.get("config");e.isObject(t)&&t.style&&this.$el.addClass(t.style)},addNavItems:function(){var t=this.model.get("navItems");e.each(t,function(e){var t="#copyright-nav-item-"+e.id,n=new s;n.model.set(e),this.addView(t,n),this.showView(t)},this)},initialize:function(){r.prototype.initialize.apply(this,arguments),this.model=new o,this.listenTo(this.model,"change",this.render)},handleLegalDrawer:function(){t("#copyright").toggleClass("open"),t("#legal").toggleClass("open"),t("#legal-btn").toggleClass("open")}});return u}),define("app/controller/postAuthAppController",["jquery","underscore","postal","session","base.model","app/layout/postAuthLayout","app/daemon/tokenManager.view","app/widgets/modal/modal.widget","app/widgets/ebschool/licence.model","app/widgets/navigation/brandNav/brand.nav.view","app/widgets/navigation/topMenu/top.menu.view","app/widgets/navigation/nextGen/header.bar.widget","app/widgets/navigation/sideBarMenu/sidebar.menu.view","app/utils/notificationEventHelper","app/utils/utils","app/widgets/searchBox/searchBox.widget","app/widgets/firsttimehelp/firsttimehelp.view","app/controller/controller","app/widgets/navigation/copyright/copyright.widget","widget.registry.service"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){"use strict";var b=t.extend({viewManager:null,layout:null,loaded:!1,subscriptions:[],load:function(t){var n=e.Deferred(),i=this;return this.loaded?n.resolve(this.loaded):(i._loadExperienceElements(t),i._loadPages(r.get("pageSettings")),i._renderManager(),i.loaded=!0,n.resolve()),n.promise()},loadDefaultPage:function(t){e.when(this.load(t)).done(function(){var e=r.getRouteAfterLogin();if(e){var t=e;n.channel("application").publish("navigate",{route:t})}else n.channel("application").publish("DashboardToggleModule",{viewName:"default"})})},_loadNextGenElements:function(){var e=this,r=e._getNavModels();if(t.isObject(r)&&!t.isEmpty(r)){if(!t.isEmpty(r.copyright)){var i=new y({el:"#copyright",channel:n.channel("widgets")}),s=r.copyright;e.layout.viewInfo.push({view:i,model:s,region:"#copyright"})}if(!t.isEmpty(r.topmenu)){var o=new f({el:"#brand",channel:n.channel("widgets"),template:"brand.nav.hbs"}),u=r.topmenu.navItems[0];e.layout.viewInfo.push({view:o,model:u,region:"#brand"});var a=new c({el:"#header-bar",channel:n.channel("widgets")});e.layout.viewInfo.push({view:a,model:{navItems:r.topmenu},region:"#header-bar"})}if(!t.isEmpty(r.sidebar)){var l=new h({el:"#sidebar-wrapper",channel:n.channel("widgets")});e.layout.viewInfo.push({view:l,model:r.sidebar,region:"#sidebar-wrapper"})}}},_loadFuelEdElements:function(){var e=this,r=e._getNavModels();if(t.isObject(r)){var s=r.topmenu||{},o=new f({el:"#dashboard-logo-container",channel:n.channel("widgets"),template:"peak.nav.hbs"}),u=new i;e.layout.viewInfo.push({view:o,model:u,region:"#dashboard-logo-container"});var a=new l({el:"#gh-header-navbar",channel:n.channel("widgets")});e.layout.viewInfo.push({view:a,model:s,region:"#gh-header-navbar"});var c=new h({el:"#sidebar-wrapper",channel:n.channel("widgets")});e.layout.viewInfo.push({view:c,model:r.sidebar,region:"#sidebar-wrapper"});if(r.search&&!t.isEmpty(r.search.navItems)){var p=t.cloneDeep(r.search.navItems[0]);p.placeHolder=p.displayName,p.searchButtonTitle=p.ariaLabel,p.icon="fa "+p.icon,p.trackingCode=p.analyticsEvents[0].id;var d=new v({xsContainer:"#gh-header-search-btn"});e.layout.viewInfo.push({view:d,model:p,region:"#student-search .navbar-form"}),e.layout.listenTo(d,"search",function(e){n.channel("application").publish("navigate",{route:"student-performance",args:{serviceUrl:p.url+encodeURIComponent(e)}})})}}},_getTemplate:function(){var e=r.isNextgen()?"layout.post.auth.nextgen.hbs":"layoutPostAuth.hbs";return r.isNextgen()&&t.isEmpty(this._getNavModels())&&(e="layout.post.auth.nextgen.nonav.hbs"),e},_loadCommonElements:function(){if(r.get("firstTimeHelp")){try{document.activeElement.blur()}catch(t){console.log("Current browser does not support activeElement.blur")}var s=new i(r.get("firstTimeHelp")),a=new m({model:s});a.render(),r.set("firstTimeHelp",null)}var f=new o;this.layout.viewInfo.push({view:f,region:".notifications-area"});var l=new u;this.layout.viewInfo.push({view:l,model:{trigger:"modelChange"},region:".modal-message-container"}),e(window).on("resize.postLogin",function(e){function t(){var t={event:e,width:window.innerWidth,breakpoints:d.calculateBreakpoints(window.innerWidth)};n.channel("window").publish("resize",t)}GLOBALS.browser.isAndroidDefaultBrowser?setTimeout(t,500):t()})},_loadExperienceElements:function(e){this.subscribeChannel("application","logout",t.bindKey(this,"_resetPostAuthAppController")),this.subscribeChannel("application","notification",t.bindKey(this,"_handleNotifications")),this.viewManager=e,this.viewManager.dispose();var i=this;this.layout=new s({el:".wrapper",template:i._getTemplate(),channel:n.channel("application")}),this.layout.viewInfo=[],this._loadCommonElements();switch(r.get("experience")){case r.nextgenKey:this._loadNextGenElements();break;default:this._loadFuelEdElements()}},_renderManager:function(){this.viewManager.render(),this.viewManager.addView(".wrapper",this.layout),this.viewManager.setView(".wrapper"),this.layout.render(),t.each(this.layout.viewInfo,function(e){this.layout.addView(e.region,e.view),this.layout.setView(e.region),e.model&&e.view.model.set(e.model)},this),e("html, body").animate({scrollTop:0},"slow")},_resetPostAuthAppController:function(){t.each(this.subscriptions,function(e){e.unsubscribe()}),this.subscriptions=[],this.viewManager.dispose(),e(window).off("resize.postLogin"),this.loaded=!1},_getNavModels:function(){var e=r.get("navigation"),n,i={};return t.isObject(e)&&(n=e.navItems||[],i.sidebar=t.find(n,{id:"sidebar"}),i.topmenu=t.find(n,{id:"topmenu"}),i.search=t.find(n,{id:"search"}),i.copyright=t.find(n,{id:"copyright"})),i}},g);return b}),define("app/router",["app/utils/utils","jquery","underscore","backbone","session","postal","container.view","app/controller/preAuthAppController","app/controller/postAuthAppController","widget.registry.service"],function(e,t,n,r,i,s,o,u,a,f){"use strict";function l(e){return function(t){this.goToView({handled:!0,route:e,args:{serviceUrl:t||"?"+arguments[1]}})}}var c=r.Router.extend({routes:{dashboard:"loadDashboard",login:"loadPreAuthPage",logout:"loadLogout","forgot-password":"loadPreAuthPage","forgot-username":"loadPreAuthPage","expired-password":"loadPreAuthPage","change-password":"goToView","account-settings":"goToView","student-performance":"goToView","student-performance/url/*query":l("student-performance"),"student-profile":"goToView","student-profile/url/*query":l("student-profile"),section:"goToView","section/url/*query":l("section"),"monitor/list":"goToView","monitor/create":"goToView","monitor/edit/url/*query":l("monitor/edit"),classes:"goToView",schedule:"goToView",news:"goToView","class":"goToView","class/url/*query":l("class"),shiny:"goToView",sso:"goToView","sso/url/*query":l("sso"),"*path":"defaultAction"},viewManager:new o({el:".app-container",template:'<section class="wrapper"></section>'}),initialize:function(){s.channel("application").subscribe("navigate",n.bind(this.onNavigate,this)),s.channel("application").subscribe("sso",n.bind(this.logoutAndSso,this))},start:function(){r.history.start()},onNavigate:function(e){var t=typeof e=="object"?e.route:e,r=this.routes[t],i=this.parseRoute(t);i&&(r=this.routes[i.baseRoute],e=this.populateRouteOptions(e,i));if(e&&e.urlnav){this.setRouteOptions(t,n.extend(n.omit(e.args,"serviceUrl"),{urlnav:!0}));return}if(!n.isFunction(this[r]))return this.navigate(t,{trigger:!0,replace:!0});this.navigate(t,{trigger:!1,replace:!1}),this[r].call(this,e)},closeGrowls:function(){t("div.gh-alert").alert("close")},loadDashboard:function(e){var n=this;t.when(f.initPostAuthWidgets(i.get("experience"),i.nextgenKey)).done(function(){a.loadDefaultPage(n.viewManager,e)})},saveRouteAndGoToLogin:function(){var e=r.history.fragment;e!=="login"&&e!=="default"&&i.setRouteAfterLogin(e),this.navigate("login",!0)},logoutAndSso:function(t){setTimeout(function(){var n=e.getAuthTokenizedUrl(t,e.getAuthTokenObject());s.channel("application").publish("unbindAjax"),a._resetPostAuthAppController(),i.destroy(!0),window.location=n},250)},loadLogout:function(){s.channel("application").publish("logout"),this.closeGrowls(),i.destroy(),e.clearWindowQueryString(!0),e.clearPreAuthQueryStrings(),this.navigate("login",!0),t("body").scrollTop(0)},loadPreAuthPage:function(e){var n=e||r.history.fragment||"login";s.channel("application").publish("bindAjax"),u.load(this.viewManager),s.channel("application").publish("DashboardToggleModule",{viewName:n}),this.navigate(n,!0),t("body").scrollTop(0)},defaultAction:function(){if(i.hasSession()){var e=i.getRouteAfterLogin();e?this.navigate(e,!0):this.navigate("dashboard",!0)}else this.navigate("login",!0)},goToView:function(e){e=e||{};var n=e.handled?e.route:r.history.fragment,s=this;i.hasSession()?t.when(f.initPostAuthWidgets(i.get("experience"),i.nextgenKey)).done(function(){t.when(a.load(s.viewManager)).done(function(){s.setOptionsAndToggleView(n,e)})}):this.saveRouteAndGoToLogin()},setOptionsAndToggleView:function(e,t){this.setRouteOptions(e,t.args),s.channel("application").publish("DashboardToggleModule",{viewName:e}),s.channel("application").publish("selectNavItem",{view:e})},setRouteOptions:function(e,t){s.channel(e).publish("options",t||{})},parseRoute:function(e){var t={};return!e||e.indexOf("?")===-1?!1:(t.baseRoute=e.substring(0,e.indexOf("?")),t.query=e.substring(e.indexOf("?")),t)},populateRouteOptions:function(e,t){return typeof e!="object"&&(e={}),e.route=t.baseRoute,e.args||(e.args={}),e.args.url=t.query,e}});return c}),define("app/env",["underscore","require"],function(e,t){"use strict";var n={loadEnvironment:function(e){debug.info("Loading environment values"),this.initEnvironment(e)},initEnvironment:function(n){debug.info("Initializing environment"),debug.setLevel(GLOBALS.ENVIRONMENT.settings["console.log.level"]);var r="";window.legacyAnalyics===!1?r="./modules/analytics/nextgen/tracking.controller.nextgen":(r="./modules/analytics/tracking.controller.fueled",e.isFunction(window.ga)&&window.ga("create",GLOBALS.ENVIRONMENT.settings["analytics.ga.token"],{cookieDomain:"none"})),t([r],function(e){e?(n.trackingController=e,n.trackingController.initialize()):debug.log("env.js says: unable to initialize tracking controller.")})}};return n}),define("application-1567739267941",["jquery","./app/utils/helpers","handlebars","./app/router","i18next","underscore","postal","session","./app/env"],function(e,t,n,r,i,s,o,u,a){"use strict";var f={debug:!1,ajaxEventsBound:!1,orientationChangeFix:function(){if(GLOBALS.browser.isIphone){var e="addEventListener",t=window.document,n="gesturestart",r="querySelectorAll",i=[1,1],s=r in t?t[r]("meta[name=viewport]"):[],o=function(){s.content="width=device-width,minimum-scale="+i[0]+",maximum-scale="+i[1],t.removeEventListener(n,o,!0)};(s=s[s.length-1])&&e in t&&(o(),i=[1,1],t[e](n,o,!0))}},loadI18nBundle:function(){debug.info("Loading i18n bundles");var t=e.Deferred();return i.init({resGetPath:GLOBALS.ENVIRONMENT.endpoints.resources,keyseparator:"^",lng:"en-US",debug:!1,fallbackLng:!1,load:"current"},function(){debug.info("Finished loading i18n bundles"),t.resolve()}),t},addHandlebarsHelpers:function(){debug.info("Loading Handlebars helpers");for(var e in t)t.hasOwnProperty(e)&&n.registerHelper(e,t[e])},startRouter:function(){debug.groupEnd(),debug.info("Starting application router");var e=new r;e.start()},setIPadRotationFix:function(){GLOBALS.browser.isIPad&&(window.onorientationchange=function(){var t=e("html");setTimeout(function(){t.width("110%"),t.width("100%")},500)})},setAndroidDefaulBrowserRotationFix:function(){GLOBALS.browser.isAndroidDefaultBrowser&&(window.onorientationchange=function(){if(window.innerWidth<window.innerHeight){var t=e(".navbar-container"),n=t.css("display");t.css("display","none"),setTimeout(function(){t.css("display",n)},1e3)}})},runInitCommands:function(t){e.when(this.bindAjaxEvents(),this.loadI18nBundle(),this.addHandlebarsHelpers(),u.initialize(),a.loadEnvironment(this),this.setIPadRotationFix(),this.setAndroidDefaulBrowserRotationFix(),this.orientationChangeFix()).then(t)},unbindAjaxEvents:function(){if(!this.ajaxEventsBound)return!0;e(document).off("ajaxComplete").off("ajaxSend"),this.ajaxEventsBound=!1},bindAjaxEvents:function(){var t=this;if(this.ajaxEventsBound)return!0;e(document).ajaxSend(function(e,t){var n=u.getToken(),r=u.get(GH_CONSTANTS.SESSION.localeName);t.setRequestHeader(GH_CONSTANTS.SESSION.utcOffset,u.getUtcOffsetInMins()),n&&t.setRequestHeader(u.tokenName,n),r&&t.setRequestHeader(GH_CONSTANTS.SESSION.localeName,r)}).ajaxSuccess(function(e,n){t.getTokensFromHeaders(n)}).ajaxComplete(function(e,n){t.getTokensFromHeaders(n)}).ajaxError(function(e,n,r){debug.group("AJAX ERROR");var i={400:function(){debug.info("Response status 400: a bad request has been made."),debug.info("Error detail: "+JSON.parse(n.responseText).errorCode)},401:function(){debug.info("Response status 401: the last request has been unauthorized."),debug.info("Error detail: "+JSON.parse(n.responseText).errorCode)},500:function(){debug.info("Response status 500: There has been an internal server error. Check server logs"),debug.info("Raw errors:"),debug.info(e),debug.info(n),debug.info(r)},200:function(){debug.log("Response status 200 returned ajaxError, likely due to an empty responseText and/or undefined responseJSON. This app makes use of empty responses."),t.getTokensFromHeaders(n)},unknown:function(){debug.info("Unknown server error: "+n.status),debug.info("Error detail: "+JSON.parse(n.responseText).errorCode)}},s=i[n.status]||i.unknown;s(),debug.groupEnd()}),this.ajaxEventsBound=!0},getTokensFromHeaders:function(e){var t=e.getResponseHeader(GH_CONSTANTS.SESSION.tokenName),n=e.responseJSON,r=e.getResponseHeader(GH_CONSTANTS.SESSION.localeName);t&&n&&n[GH_CONSTANTS.SESSION.jsonTypeName]?u.swap(n[GH_CONSTANTS.SESSION.jsonTypeName],t):t&&u.setToken(t),r&&u.set(GH_CONSTANTS.SESSION.localeName,r)},start:function(){debug.group("Bootstrapping application"),this.runInitCommands(this.startRouter),u.setBootstrapped(!0),o.channel("application").subscribe("bindAjax",s.bind(this.bindAjaxEvents,this)),o.channel("application").subscribe("unbindAjax",s.bind(this.bindAjaxEvents,this))}};return f});