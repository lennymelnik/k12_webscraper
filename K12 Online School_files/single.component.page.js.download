define(["jquery","underscore","i18next","page.view","app/widgets/pageTitle/page.title.widget","app/widgets/componentGroup/component.group.widget","session"],function(e,t,n,r,i,s,o){"use strict";return r.extend({viewId:null,template:"single.component.page.hbs",defaultServiceUrl:null,serviceUrl:null,subviewDefs:{"#page-title-widget-container":{dataKey:"pageTitleWidget",view:i,parser:"_pageTitleParser"},"#components":{dataKey:"components",view:s,parser:"_componentParser"},"#form":{dataKey:"formWidget",view:"form.widget"}},beforeRender:function(){r.prototype.beforeRender.apply(this,arguments)},initialize:function(){r.prototype.initialize.apply(this,arguments),!this.defaultServiceUrl&&!this.options.defaultServiceUrl&&(this.defaultServiceUrl=o.endpoint(this.viewId))},setActive:function(){r.prototype.setActive.apply(this,arguments),this.activePageSubscriptions.push(this.subscribeChannel("page","filterSelected",t.bindKey(this,"handleFilterChange")),this.subscribeChannel(this.viewId,"update",t.bindKey(this,"handleFormResponse")),this.subscribeChannel(this.viewId,"pageTitle",t.bindKey(this,"updateTitle")))},updatePageStyle:function(e){var n=this;e.config&&e.config.style&&t.forEach(this.subviewDefs,function(t,r){e[t.dataKey]&&n.$el.find(r).addClass(e.config.style)},this)},updateWidgets:function(e){this.updatePageStyle(e),this.afterRenderSubviews(e)},_hideEmptyElements:function(e){var n=this;t.forEach(this.subviewDefs,function(t,r){e[t.dataKey]?n.$el.find(r).show():n.$el.find(r).hide()},this)},handleFormResponse:function(e){this.updateWidgets(e)}})});