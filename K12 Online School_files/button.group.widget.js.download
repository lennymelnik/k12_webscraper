define(["underscore","backbone","container.view","app/deprecated/widgets/button/button.widget","app/widgets/dropdown/dropdown.widget"],function(e,t,n,r,i){"use strict";var s=n.extend({template:"button.group.widget.hbs",notificationCallback:null,collection:null,components:null,initialize:function(){n.prototype.initialize.apply(this,arguments),this.components=[],this.collection=new t.Collection,this.options&&(this.notificationCallback=this.options.notificationCallback||null),this.listenTo(this.collection,"reset",this.sculpt)},sculpt:function(){this.components=[],this.assignCallBackToLink(),e.each(this.collection.models,function(e){var t,n={};e.get("type")==="com.k12.metadata.items.Button"||e.get("type")==="Button"?(t=new r,e.set({hideLabel:!0})):(e.set({buttonStyle:"secondary-button",labelStyle:"hidden-xs",ulStyle:"dropdown-menu-right",standAlone:!1}),t=new i),n.data=e.toJSON(),n.view=t,n.id=e.get("id"),this.components.push(n),this.addView("#"+e.get("id"),n.view)},this),this.render()},afterRender:function(){e.each(this.components,function(e){this.setView("#"+e.id),e.view.model.set(e.data)},this)},assignCallBackToLink:function(){if(!this.notificationCallback)return;e.each(this.collection.models,function(t){e.each(t.get("options"),function(t){e.each(t.notificationEvents,function(t){e.each(t.buttons,function(e){e.link&&(e.callbackWrapper=this.notificationCallback)},this)},this)},this)},this)}});return s});